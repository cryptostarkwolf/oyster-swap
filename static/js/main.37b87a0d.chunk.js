(this["webpackJsonptoken-swap-ui"]=this["webpackJsonptoken-swap-ui"]||[]).push([[0],{1034:function(e,t,n){},1042:function(e,t,n){},1118:function(e,t,n){},1119:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(52),i=n.n(o),c=(n(560),n(561),n(376)),u=n(160),s=n(76),l=n(22),d=n(1120),p=n(1126),m=n(97),f=n(122),b=n(216),y=n(124),v=n(1122),g=n(1121),h=n(184),k=n(77),w=n(16),E=n(531),O=n.n(E),j=n(24),A=n.n(j),x=(n(714),function(e){var t=e.address,n=e.style,o=Object(a.useRef)();return Object(a.useEffect)((function(){t&&o.current&&(o.current.innerHTML="",o.current.className=e.className||"",o.current.appendChild(O()((null===n||void 0===n?void 0:n.width)||16,parseInt(A.a.decode(t).toString("hex").slice(5,15),16))))}),[t,n,e.className]),r.a.createElement("div",{className:"identicon-wrapper",ref:o,style:e.style})}),S=n(19),N=n(21),B=function(e){var t=Object(k.b)().wallet,n=Object(S.i)().account;return t&&t.publicKey?r.a.createElement("div",{className:"wallet-wrapper"},r.a.createElement("span",null,(((null===n||void 0===n?void 0:n.lamports)||0)/N.c).toFixed(6)," SOL"),r.a.createElement("div",{className:"wallet-key"},Object(w.n)("".concat(t.publicKey)),r.a.createElement(x,{address:t.publicKey.toBase58(),style:{marginLeft:"0.5rem"}}))):null},T=n(309),I=n(132),M=function(e){var t,n=e.children,a=Object(k.b)(),o=a.connected,i=a.wallet,c=a.select,u=a.connect,s=a.disconnect,l=o&&(null===i||void 0===i||null===(t=i.publicKey)||void 0===t?void 0:t.toBase58())||"",d=r.a.createElement(h.a,{style:{textAlign:"right"}},o&&r.a.createElement(I.a,{type:"address",address:l,style:{padding:12}}),r.a.createElement(h.a.Item,{key:"3",onClick:c},"Change Wallet"),o&&r.a.createElement(h.a.Item,{key:"2",style:{color:"rgba(255, 0, 0, 0.7)"},onClick:s},"Disconnect"));return o?r.a.createElement(T.a,{overlay:d,trigger:["hover"]},r.a.createElement("div",{style:{cursor:"pointer"}},n)):r.a.createElement(T.a.Button,{onClick:o?s:u,overlay:d},o?"Disconnect":"Connect")},C=function(e){var t=Object(k.b)().connected,n=Object(s.f)(),a=Object(s.e)();return r.a.createElement("div",{className:"App-Bar"},r.a.createElement("div",{className:"App-Bar-left"},r.a.createElement("div",{className:"App-logo"}),r.a.createElement(h.a,{mode:"horizontal",selectedKeys:[n.pathname]},r.a.createElement(h.a.Item,{key:"/"},r.a.createElement(u.b,{to:{pathname:"/"}},"Swap")),r.a.createElement(h.a.Item,{key:"/add"},r.a.createElement(u.b,{to:{pathname:"/add"}},"Pool")),r.a.createElement(h.a.Item,{key:"/info"},r.a.createElement(u.b,{to:{pathname:"/info"}},"Charts")),r.a.createElement(h.a.Item,{key:"trade"},r.a.createElement("a",{href:"https://serum-dex.cryptostarkwolf.com/",target:"_blank",rel:"noopener noreferrer"},"Trade",r.a.createElement("sup",null,"\u2197"))),r.a.createElement(h.a.Item,{key:"help"},r.a.createElement("a",{href:"https://serum-academy.com/en/serum-swap/",target:"_blank",rel:"noopener noreferrer"},"Help",r.a.createElement("sup",null,"\u2197")))),e.left),r.a.createElement("div",{className:"App-Bar-right"},r.a.createElement(M,null,r.a.createElement(B,null)),t&&r.a.createElement(m.a,{type:"text",size:"large",onClick:function(){return a.push({pathname:"/pool"})}},"My Pools"),e.right))},F=n(249),q=n(32),P=n(55),W=n(66),L=n(87),K=n(86),D=n(1125),_=function(e){Object(L.a)(n,e);var t=Object(K.a)(n);function n(){var e;Object(P.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onChange=function(t){var n=t.target.value;(/^-?\d*(\.\d*)?$/.test(n)||""===n||"-"===n)&&e.props.onChange(n)},e.onBlur=function(){var t=e.props,n=t.value,a=t.onBlur,r=t.onChange,o=n;"."!==n.charAt(n.length-1)&&"-"!==n||(o=n.slice(0,-1)),(n.startsWith(".")||n.startsWith("-."))&&(o=o.replace(".","0.")),r(o.replace(/0*(\d+)/,"$1")),a&&a()},e}return Object(W.a)(n,[{key:"render",value:function(){return r.a.createElement(D.a,Object.assign({},this.props,{onChange:this.onChange,onBlur:this.onBlur,maxLength:25}))}}]),n}(r.a.Component),R=function(){var e=Object(q.f)(),t=e.slippage,n=e.setSlippage,o=100*t,i=Object(a.useState)(o.toString()),c=Object(l.a)(i,2),u=c[0],s=c[1];Object(a.useEffect)((function(){s(o.toString())}),[t,o]);var d={margin:5};return r.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"}},[.1,.5,1].map((function(e){return r.a.createElement(m.a,{key:e.toString(),style:d,type:(t=e,t===o?"primary":"default"),onClick:function(){return n(e/100)}},e,"%");var t})),r.a.createElement("div",{style:{padding:"3px 10px 3px 3px",border:"1px solid #434343"}},r.a.createElement(_,{className:"slippage-input",size:"small",placeholder:u,value:u,style:{width:50,fontSize:14,boxShadow:"none",borderColor:"transparent",outline:"transpaernt"},onChange:function(e){s(e);var t=parseFloat(e)/100;Number.isFinite(t)&&n(t)}}),"%"))},z=function(){var e=Object(q.e)(),t=e.endpoint,n=e.setEndpoint;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,"Transactions: Settings:",r.a.createElement("div",null,"Slippage:",r.a.createElement(R,null))),r.a.createElement("div",{style:{display:"grid"}},"Network:"," ",r.a.createElement(F.a,{onSelect:n,value:t,style:{marginRight:8}},q.b.map((function(e){var t=e.name,n=e.endpoint;return r.a.createElement(F.a.Option,{value:n,key:n},t)})))))},U=n(1130),V=n(1133),G=n(1134),Y=n(30),H=function(e){var t=Object(q.e)().tokenMap,n=Object(w.k)(t,e.mintAddress);return n?r.a.createElement("img",{alt:"Token icon",className:e.className,key:e.mintAddress,width:"20",height:"20",src:n,style:Object(Y.a)({marginRight:"0.5rem",marginTop:"0.11rem",borderRadius:"1rem",backgroundColor:"white",backgroundClip:"padding-box"},e.style)}):r.a.createElement(x,{address:e.mintAddress,style:Object(Y.a)({marginRight:"0.5rem",display:"flex",alignSelf:"center",width:20,height:20,marginTop:2},e.style)})},J=function(e){return r.a.createElement("div",{className:e.className,style:{display:"flex"}},r.a.createElement(H,{mintAddress:e.mintA,style:Object(Y.a)({marginRight:"-0.5rem"},e.style)}),r.a.createElement(H,{mintAddress:e.mintB}))},Q=(n(418),n(163)),X=n.n(Q),$=n(11),Z=n.n($),ee=n(15),te=n(37),ne=[],ae={},re=n(147),oe=n(302),ie=n(39),ce=new Date("2020-10-27"),ue=r.a.createContext(null),se=new oe.a;function le(e){var t=e.children,n=void 0===t?null:t,o=Object(q.e)().endpoint,i=Object(S.g)().pools,c=Object(a.useMemo)((function(){return new Map}),[]),u=Object(a.useState)(new Map),s=Object(l.a)(u,2),d=s[0],p=s[1],m=Object(a.useMemo)((function(){return new N.b(o,"recent")}),[o]),f=Object(a.useMemo)((function(){return Object(te.a)(new Set(i.map((function(e){return e.pubkeys.holdingMints})).flat()).values()).reduce((function(e,t){var n=t.toBase58(),a=re.TOKEN_MINTS.find((function(e){return e.address.toBase58()===n})),r=ae[n],o="".concat(null===a||void 0===a?void 0:a.name,"/USDC"),i=re.MARKETS.find((function(e){return e.name===o||e.address.toBase58()===r}));return i&&e.set(n,{marketInfo:i}),e}),new Map)}),[i]);Object(a.useEffect)((function(){var e=0,t=0,n=function(){var t=Object(ee.a)(Z.a.mark((function t(){return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fe(m,Object(te.a)(c.keys()));case 2:se.raiseMarketUpdated(new Set(Object(te.a)(f.keys()))),e=window.setTimeout((function(){return n()}),3e4);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),a=function(){var e=Object(ee.a)(Z.a.mark((function e(){var n,r,o;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,window.fetch("https://serum-api.bonfida.com/pools-recent");case 3:return n=e.sent,e.next=6,n.json();case 6:r=e.sent,o=(null===r||void 0===r?void 0:r.data).reduce((function(e,t){return e.set(t.pool_identifier,t),e}),new Map),p(o),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(0);case 13:t=window.setTimeout((function(){return a()}),18e5);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();return function(){var e=Object(ee.a)(Z.a.mark((function e(){var t,r,o;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Map,Object(te.a)(f.keys()).forEach((function(e){var n=f.get(e);n&&t.set(n.marketInfo.address.toBase58(),e)})),r=Object(te.a)(f.values()).map((function(e){return e.marketInfo.address.toBase58()})),e.next=5,Object(S.e)(m,r.filter((function(e){return void 0===S.c.get(e)})),"single").then((function(e){var n=e.keys,a=e.array;return r.forEach((function(){})),a.map((function(e,a){var r=n[a],o=t.get(r);if(o){var i=f.get(o);if(i){var c=i.marketInfo.programId,u=i.marketInfo.address;S.c.add(u,e,(function(e,t){var n=re.Market.getLayout(c).decode(t.data),a={pubkey:e,account:Object(Y.a)({},t),info:n};return S.c.registerParser(a.info.baseMint,S.b),S.c.registerParser(a.info.quoteMint,S.b),S.c.registerParser(a.info.bids,pe),S.c.registerParser(a.info.asks,pe),a}))}}return e}))}));case 5:return o=new Set,r.forEach((function(e){var t=S.c.get(e);if(t){var n=t;S.c.get(n.info.baseMint)||o.add(n.info.baseMint.toBase58()),S.c.get(n.info.baseMint)||o.add(n.info.quoteMint.toBase58()),o.add(n.info.bids.toBase58()),o.add(n.info.asks.toBase58())}})),e.next=9,fe(m,Object(te.a)(o.keys()));case 9:se.raiseMarketUpdated(new Set(Object(te.a)(f.keys()))),n(),a();case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),function(){window.clearTimeout(t),window.clearTimeout(e)}}),[i,f,c,m]);var b=Object(a.useCallback)((function(e){var t;return me(null===(t=f.get(e))||void 0===t?void 0:t.marketInfo.address.toBase58(),e)}),[f]),y=Object(a.useCallback)((function(e){var t=f.get(e),n=S.c.get((null===t||void 0===t?void 0:t.marketInfo.address.toBase58())||"");if(!n)return function(){};var a=n.info.bids.toBase58(),r=n.info.asks.toBase58();return c.set(a,(c.get(a)||0)+1),c.set(r,(c.get(r)||0)+1),function(){c.set(a,(c.get(a)||0)-1),c.set(r,(c.get(r)||0)-1),Object(te.a)(c.keys()).forEach((function(e){(c.get(e)||0)<=0&&c.delete(e)}))}}),[f,c]);return r.a.createElement(ue.Provider,{value:{midPriceInUSD:b,marketEmitter:se,accountsToObserve:c,marketByMint:f,subscribeToMarket:y,dailyVolume:d}},n)}var de=function(e){var t=Object(a.useContext)(ue),n=Object(q.e)().tokenMap,r=Object(a.useState)([]),o=Object(l.a)(r,2),i=o[0],c=o[1],u=null===t||void 0===t?void 0:t.subscribeToMarket,s=null===t||void 0===t?void 0:t.marketEmitter,d=null===t||void 0===t?void 0:t.marketByMint,p=null===t||void 0===t?void 0:t.dailyVolume;return Object(a.useEffect)((function(){if(s&&u){var t=Object(te.a)(new Set(Object(te.a)(null===d||void 0===d?void 0:d.keys())).keys()).map((function(e){return u(e)})),a=function(){c(function(e,t,n,a){var r=new Date;if(!t)return[];return e.filter((function(e){return e.pubkeys.holdingMints&&e.pubkeys.holdingMints.length>1})).map((function(e,o){var i,c,u,s=(e.pubkeys.holdingMints||[]).map((function(e){return e.toBase58()})).sort(),l=S.c.getMint(s[0]),d=S.c.getMint(s[1]),p=S.c.getAccount(e.pubkeys.holdingAccounts[0]),m=S.c.getAccount(e.pubkeys.holdingAccounts[1]),f=(null===p||void 0===p?void 0:p.info.mint.toBase58())===s[0]?p:m,b=(null===m||void 0===m?void 0:m.info.mint.toBase58())===s[1]?m:p,y=me((null===(i=t.get(s[0]))||void 0===i?void 0:i.marketInfo.address.toBase58())||"",s[0]),v=y*Object(w.d)(f,l),g=me((null===(c=t.get(s[1]))||void 0===c?void 0:c.marketInfo.address.toBase58())||"",s[1])*Object(w.d)(b,d),h=S.c.getMint(e.pubkeys.mint);if(!(null===h||void 0===h?void 0:h.supply.eqn(0))){var k=function(e,t,n,a){var r=0,o=ne.find((function(t){return t.pool.equals(e.pubkeys.mint)}));o&&(r=o.airdrops.reduce((function(e,r){var o,i=null===(o=t.get(r.mint.toBase58()))||void 0===o?void 0:o.marketInfo.address;if(i){var c=me(null===i||void 0===i?void 0:i.toBase58(),r.mint.toBase58());e+=r.amount*c/(n+a)*(365/30)}return e}),0));return r}(e,t,v,g),E=0,O=y*((null===n||void 0===n||null===(u=n.get(e.pubkeys.mint.toBase58()))||void 0===u?void 0:u.volume24hA)||0),j=O*(ie.a-ie.c),A=0,x=k,N=k;if(e.pubkeys.feeAccount){var B=S.c.getAccount(e.pubkeys.feeAccount);if(h&&B&&B.info.mint.toBase58()===e.pubkeys.mint.toBase58()){var T=(null===B||void 0===B?void 0:B.info.amount.toNumber())/(null===h||void 0===h?void 0:h.supply.toNumber());if(0!==(A=(E=(T*v+T*g)/4e-4)*ie.a)){var I=T*v/4e-4,M=T*g/4e-4,C=Math.floor((r.getTime()-ce.getTime())/864e5),F=parseFloat(I/C*ie.a*356)/v,q=parseFloat(M/C*ie.a*356)/g;x+=Math.max(F,q),N+=parseFloat(O*ie.a*356)/v}}}var P=S.c.getMint(e.pubkeys.mint),W=Object(w.j)(a,e),L="#/?pair=".concat(Object(w.j)(a,e,!1).replace("/","-"));return{key:e.pubkeys.account.toBase58(),id:o,name:W,names:s.map((function(e){return Object(w.l)(a,e)})),accounts:[null===f||void 0===f?void 0:f.pubkey,null===b||void 0===b?void 0:b.pubkey],address:e.pubkeys.mint.toBase58(),link:L,mints:s,liquidityA:Object(w.d)(f,l),liquidityAinUsd:v,liquidityB:Object(w.d)(b,d),liquidityBinUsd:g,supply:P&&((null===P||void 0===P?void 0:P.supply.toNumber())/Math.pow(10,(null===P||void 0===P?void 0:P.decimals)||0)).toFixed(9),fees:A,fees24h:j,liquidity:v+g,volume:E,volume24h:O,apy:Number.isFinite(x)?x:0,apy24h:Number.isFinite(N)?N:0,map:n,extra:null===n||void 0===n?void 0:n.get(e.pubkeys.account.toBase58()),raw:e}}})).filter((function(e){return void 0!==e}))}(e,d,p,n))},r=s.onMarket(a);return a(),function(){r&&r(),t.forEach((function(e){return e&&e()}))}}}),[n,e,p,u,s,d]),i};var pe=function(e,t){var n=re.Orderbook.LAYOUT.decode(t.data);return{pubkey:e,account:Object(Y.a)({},t),info:n}},me=function(e,t){var n,a,r,o,i=re.TOKEN_MINTS.find((function(e){return e.address.toBase58()===t}));if(w.a.has((null===i||void 0===i?void 0:i.name)||""))return 1;if(!e)return 0;var c=S.c.get(e);if(!c)return 0;var u=c.info,s=(null===(n=S.c.get(u.baseMint))||void 0===n?void 0:n.info.decimals)||0,l=(null===(a=S.c.get(u.quoteMint))||void 0===a?void 0:a.info.decimals)||0,d=new re.Market(u,s,l,void 0,u.programId),p=null===(r=S.c.get(u.bids))||void 0===r?void 0:r.info,m=null===(o=S.c.get(u.asks))||void 0===o?void 0:o.info;if(p&&m){var f=new re.Orderbook(d,p.accountFlags,p.slab),b=new re.Orderbook(d,m.accountFlags,m.slab),y=f.getL2(1),v=b.getL2(1);if(y.length>0&&v.length>0)return(y[0][0]+v[0][0])/2}return 0},fe=function(){var e=Object(ee.a)(Z.a.mark((function e(t,n){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==n.length){e.next=2;break}return e.abrupt("return",[]);case 2:return e.abrupt("return",Object(S.e)(t,n,"single").then((function(e){var t=e.keys;return e.array.map((function(e,n){var a=t[n];return S.c.add(new N.d(a),e)}))})));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),be=n(1127),ye=n(1128),ve=function(e){return r.a.createElement(b.a,{style:Object(Y.a)({width:"100%"},e.style)},e.label&&r.a.createElement(y.a,{span:4},e.label,":"),r.a.createElement(y.a,{span:17},r.a.createElement(I.a,{address:e.address,code:!0,type:"address"})),r.a.createElement(y.a,{span:3,style:{display:"flex"}},r.a.createElement(m.a,{shape:"round",icon:r.a.createElement(be.a,null),size:"small",style:{marginLeft:"auto",marginRight:0},onClick:function(){return navigator.clipboard.writeText(e.address)}})))},ge=function(e){var t=e.pool,n=e.label||"Address";return(null===t||void 0===t?void 0:t.pubkeys.account)?r.a.createElement(ve,{address:t.pubkeys.account.toBase58(),style:e.style,label:n}):null},he=function(e){var t=Object(q.e)().tokenMap,n=e.pool;if(!n)return null;var a,o,i=null===n||void 0===n?void 0:n.pubkeys.holdingAccounts[0],c=null===n||void 0===n?void 0:n.pubkeys.holdingAccounts[1],u=null===n||void 0===n?void 0:n.pubkeys.holdingMints[0],s=null===n||void 0===n?void 0:n.pubkeys.holdingMints[1];return u&&(a=Object(w.l)(t,u.toBase58())),s&&(o=Object(w.l)(t,s.toBase58())),r.a.createElement(r.a.Fragment,null,i&&r.a.createElement(ve,{address:i.toBase58(),style:e.style,label:a}),c&&r.a.createElement(ve,{address:c.toBase58(),style:e.style,label:o}))},ke=function(e){var t=e.pool;return t?r.a.createElement(p.a,{placement:"topRight",title:"Addresses",trigger:"hover",content:r.a.createElement(r.a.Fragment,null,r.a.createElement(ge,{pool:t,showLabel:!0,label:"Pool"}),r.a.createElement(he,{pool:t}))},r.a.createElement(m.a,{shape:"circle",size:"large",type:"text",className:"trade-address-info-button",icon:r.a.createElement(ye.a,null)})):null},we=n(538),Ee=n(308),Oe=n(1123),je=n(42),Ae=n(48),xe=n(1129),Se=function(e){var t=e.pool,n=Object(a.useMemo)((function(){return t?[t]:[]}),[t]),o=de(n),i=Object(a.useRef)(null);return Object(a.useEffect)((function(){var e=i.current;return function(){var t=e&&X.a.getInstanceByDom(e);t&&t.dispose()}}),[]),Object(a.useEffect)((function(){if(i.current&&0!==o.length){var e=X.a.getInstanceByDom(i.current);e||(e=X.a.init(i.current));var t=[{name:o[0].names[0],value:o[0].liquidityAinUsd,tokens:o[0].liquidityA},{name:o[0].names[1],value:o[0].liquidityBinUsd,tokens:o[0].liquidityB}];e.setOption({tooltip:{trigger:"item",formatter:function(e){var t=w.i.format(e.value),n=w.e.format(e.data.tokens);return"".concat(e.name,": \n").concat(t,"\n(").concat(n,")")}},series:[{name:"Liquidity",type:"pie",top:0,bottom:0,left:0,right:0,animation:!1,label:{fontSize:14,show:!0,formatter:function(e){var t=w.i.format(e.value),n=w.e.format(e.data.tokens);return"{c|".concat(e.name,"}\n{r|").concat(n,"}\n{r|").concat(t,"}")},rich:{c:{color:"#999",lineHeight:22,align:"center"},r:{color:"#999",align:"right"}},color:"rgba(255, 255, 255, 0.5)"},itemStyle:{normal:{borderColor:"#000"}},data:t}]})}}),[o]),0===o.length?null:r.a.createElement("div",{ref:i,style:{height:150,width:"100%"}})},Ne=(n(1034),F.a.Option),Be=function(e){var t=e.showBalance,n=e.mintAddress,a=e.name,o=e.icon,i=Object(S.h)(n),c=Object(S.f)(n),u=0,s=!1;return t&&c&&i&&(s=(u=c.info.amount.toNumber()/Math.pow(10,i.decimals))>0),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{title:n,key:n,style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},o||r.a.createElement(H,{mintAddress:n}),a),t?r.a.createElement("span",{title:u.toString(),key:n,className:"token-balance"},"\xa0"," ",s?u<.001?"<0.001":u.toFixed(3):"-"):null))},Te=function(e){var t=Object(S.j)().userAccounts,n=Object(S.g)().pools,a=Object(S.h)(e.mint),o=Object(q.e)(),i=o.tokens,c=o.tokenMap,u=i.map((function(e){return r.a.createElement(Ne,{key:e.address,value:e.address,name:e.symbol,title:e.address},r.a.createElement(Be,{key:e.address,name:e.symbol,mintAddress:e.address,showBalance:!0}))})),s=t.sort((function(e,t){return t.info.amount.toNumber()-e.info.amount.toNumber()})).reduce((function(e,t){var a=t.info.mint.toBase58();if(Object(w.m)(c,a))return e;var r=n.find((function(e){return e&&e.pubkeys.mint.toBase58()===a}));return e.set(a,(e.get(a)||[]).concat([{account:t,pool:r}])),e}),new Map),l=Object(te.a)(s.keys());i.findIndex((function(t){return t.address===e.mint}))<0&&e.mint&&!s.has(null===e||void 0===e?void 0:e.mint)&&l.push(e.mint);var d=l.map((function(e){var t,n,a,o=s.get(e);o&&o.length>0&&(t=o[0].pool);if(t){n=Object(w.j)(c,t);var i=t.pubkeys.holdingMints.map((function(e){return e.toBase58()})).sort();a=r.a.createElement(J,{mintA:i[0],mintB:i[1]})}else n=Object(w.l)(c,e,!0,3),a=r.a.createElement(H,{mintAddress:e});return r.a.createElement(Ne,{key:e,value:e,name:n},r.a.createElement(Be,{key:e,mintAddress:e,name:n,icon:a,showBalance:!t}))})),p=function(){var n=null===t||void 0===t?void 0:t.find((function(t){return t.info.mint.toBase58()===e.mint}));return n&&a?n.info.amount.toNumber()/Math.pow(10,a.decimals):0};return r.a.createElement(v.a,{className:"ccy-input",style:{borderRadius:20},bodyStyle:{padding:0}},r.a.createElement("div",{className:"ccy-input-header"},r.a.createElement("div",{className:"ccy-input-header-left"},e.title),r.a.createElement("div",{className:"ccy-input-header-right",onClick:function(t){return e.onInputChange&&e.onInputChange(p())}},"Balance: ",p().toFixed(6))),r.a.createElement("div",{className:"ccy-input-header",style:{padding:"0px 10px 5px 7px"}},r.a.createElement(_,{value:e.amount,onChange:function(t){e.onInputChange&&e.onInputChange(t)},style:{fontSize:20,boxShadow:"none",borderColor:"transparent",outline:"transpaernt"},placeholder:"0.00"}),r.a.createElement("div",{className:"ccy-input-header-right",style:{display:"felx"}},e.hideSelect?e.mint&&r.a.createElement(Be,{key:e.mint,name:Object(w.l)(c,e.mint),mintAddress:e.mint,showBalance:!0}):r.a.createElement(F.a,{size:"large",showSearch:!0,style:{minWidth:150},placeholder:"CCY",value:e.mint,onChange:function(t){e.onMintChange&&e.onMintChange(t)},filterOption:function(e,t){var n;return(null===t||void 0===t||null===(n=t.name)||void 0===n?void 0:n.toLowerCase().indexOf(e.toLowerCase()))>=0}},[].concat(Object(te.a)(u),Object(te.a)(d))))))},Ie=function(e){var t,n,a=e.balance,o=e.pool,i=e.mint,c=Object(q.e)().tokenMap;if(o){t=Object(w.j)(c,o);var u=o.pubkeys.holdingMints.map((function(e){return e.toBase58()})).sort();n=r.a.createElement(J,{mintA:u[0],mintB:u[1]})}else t=Object(w.l)(c,i,!0,3),n=r.a.createElement(H,{mintAddress:i});return r.a.createElement(v.a,{className:"ccy-input",style:{borderRadius:20},bodyStyle:{padding:0}},r.a.createElement("div",{className:"ccy-input-header"},r.a.createElement("div",{className:"ccy-input-header-left"},e.title),a&&r.a.createElement("div",{className:"ccy-input-header-right",onClick:function(t){return e.onInputChange&&e.onInputChange(a)}},"Balance: ",a.toFixed(6))),r.a.createElement("div",{className:"ccy-input-header",style:{padding:"0px 10px 5px 7px"}},r.a.createElement(_,{value:e.amount,onChange:function(t){e.onInputChange&&e.onInputChange(t)},style:{fontSize:20,boxShadow:"none",borderColor:"transparent",outline:"transpaernt"},placeholder:"0.00"}),r.a.createElement("div",{className:"ccy-input-header-right",style:{display:"felx"}},r.a.createElement(Be,{key:i,mintAddress:i,name:t,icon:n}))))},Me=(n(507),n(34)),Ce=F.a.Option,Fe=function(e){var t=Object(a.useState)((e.numerator/e.denominator*100).toString()),n=Object(l.a)(t,2),o=n[0],i=n[1];return r.a.createElement("div",{style:{padding:"3px 10px 3px 3px",border:"1px solid #434343"}},r.a.createElement(_,{className:"slippage-input",size:"small",value:o,style:{width:50,fontSize:14,boxShadow:"none",borderColor:"transparent",outline:"transpaernt"},onChange:function(t){i(t);var n=parseFloat(t);if(Number.isFinite(n)){var a=n*je.DEFAULT_DENOMINATOR/100;e.set(a,je.DEFAULT_DENOMINATOR)}}}),"%")},qe=function(e){var t=Object(a.useState)("0"),n=Object(l.a)(t,2),o=n[0],i=n[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,"Token B constant price:"),r.a.createElement("div",{style:{padding:"3px 10px 3px 3px",border:"1px solid #434343"}},r.a.createElement(_,{className:"slippage-input",size:"small",value:o,style:{width:50,fontSize:14,boxShadow:"none",borderColor:"transparent",outline:"transpaernt"},onChange:function(t){i(t),e.setOptions(Object(Y.a)(Object(Y.a)({},e.options),{},{token_b_price:parseInt(t)}))}}))))},Pe=function(e){var t=e.options.fees,n=t.tradeFeeNumerator,a=t.tradeFeeDenominator,o=t.ownerTradeFeeNumerator,i=t.ownerTradeFeeDenominator,c=t.ownerWithdrawFeeNumerator,u=t.ownerWithdrawFeeDenominator,s=r.a.createElement(r.a.Fragment,null,r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,"LPs Trading Fee:"),r.a.createElement(Fe,{numerator:n,denominator:a,set:function(t,n){return e.setOptions(Object(Y.a)(Object(Y.a)({},e.options),{},{fees:Object(Y.a)(Object(Y.a)({},e.options.fees),{},{tradeFeeNumerator:t,tradeFeeDenominator:n})}))}})),r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,"Owner Trading Fee:"),r.a.createElement(Fe,{numerator:o,denominator:i,set:function(t,n){return e.setOptions(Object(Y.a)(Object(Y.a)({},e.options),{},{fees:Object(Y.a)(Object(Y.a)({},e.options.fees),{},{ownerTradeFeeNumerator:t,ownerTradeFeeDenominator:n})}))}})),r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,"Withdraw Fee:"),r.a.createElement(Fe,{numerator:c,denominator:u,set:function(t,n){return e.setOptions(Object(Y.a)(Object(Y.a)({},e.options),{},{fees:Object(Y.a)(Object(Y.a)({},e.options.fees),{},{ownerWithdrawFeeNumerator:t,ownerWithdrawFeeDenominator:n})}))}})));return r.a.createElement(v.a,{title:"Pool configuration"},r.a.createElement("div",{className:"pool-settings-grid"},Me.a&&s,r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,"Curve Type:"),r.a.createElement(F.a,{defaultValue:"0",style:{width:200},onChange:function(t){return e.setOptions(Object(Y.a)(Object(Y.a)({},e.options),{},{curveType:parseInt(t)}))}},r.a.createElement(Ce,{value:je.CurveType.ConstantProduct.toString()},"Constant Product"),r.a.createElement(Ce,{value:je.CurveType.ConstantPrice.toString()},"Constant Price"),r.a.createElement(Ce,{value:je.CurveType.ConstantProductWithOffset.toString()},"Offset Constant Product"))),e.options.curveType===je.CurveType.ConstantPrice&&r.a.createElement(qe,e)),e.action)},We=r.a.createContext(null),Le=function(e,t){var n=Object(q.e)().tokenMap,r=Object(a.useState)(""),o=Object(l.a)(r,2),i=o[0],c=o[1],u=Object(a.useState)(t||""),s=Object(l.a)(u,2),d=s[0],p=s[1],m=Object(S.f)(d),f=Object(S.h)(d);return Object(a.useMemo)((function(){return{mintAddress:d,account:m,mint:f,amount:i,name:Object(w.l)(n,d),icon:Object(w.k)(n,d),setAmount:c,setMint:p,convertAmount:function(){return function(e,t){return parseFloat(e)*Math.pow(10,(null===t||void 0===t?void 0:t.decimals)||0)}(i,f)},sufficientBalance:function(){return void 0!==m&&(Object(w.d)(m,f)>=parseFloat(i)||e.curveType===je.CurveType.ConstantProductWithOffset)}}}),[d,m,f,i,n,c,p,e])};function Ke(e){var t=e.children,n=void 0===t?null:t,o=Object(q.d)(),i=Object(q.e)().tokens,c=Object(s.e)(),u=Object(s.f)(),d=Object(a.useState)(""),p=Object(l.a)(d,2),m=p[0],f=p[1],b=Object(a.useState)(ie.b.Add),y=Object(l.a)(b,2),v=y[0],g=y[1],h=Object(a.useState)({curveType:je.CurveType.ConstantProduct,fees:{tradeFeeNumerator:25,tradeFeeDenominator:je.DEFAULT_DENOMINATOR,ownerTradeFeeNumerator:5,ownerTradeFeeDenominator:je.DEFAULT_DENOMINATOR,ownerWithdrawFeeNumerator:0,ownerWithdrawFeeDenominator:0,hostFeeNumerator:20,hostFeeDenominator:100}}),k=Object(l.a)(h,2),w=k[0],E=k[1],O=Le(w),j=O.mintAddress,A=O.setMint,x=O.amount,S=O.setAmount,N=Le(w),B=N.mintAddress,T=N.setMint,I=N.amount,M=N.setAmount,C=Object(ie.j)([O.mintAddress,N.mintAddress]);Object(a.useEffect)((function(){var e,t,n=(null===(e=i.find((function(e){return e.address===j})))||void 0===e?void 0:e.symbol)||j,a=(null===(t=i.find((function(e){return e.address===B})))||void 0===t?void 0:t.symbol)||B;document.title="Swap | Serum (".concat(n,"/").concat(a,")")}),[j,B,i,u]),Object(a.useEffect)((function(){var e,t,n=(null===(e=i.find((function(e){return e.address===j})))||void 0===e?void 0:e.symbol)||j,a=(null===(t=i.find((function(e){return e.address===B})))||void 0===t?void 0:t.symbol)||B;if(n&&a&&u.pathname.indexOf("info")<0)c.push({search:"?pair=".concat(n,"-").concat(a)});else{if(!j||!B)return;c.push({search:""})}}),[j,B,i,c,u.pathname]),Object(a.useEffect)((function(){var e,t;if(u.search||!j||!B){var n=function(e,t){var n="SOL",a="USDC",r=e.reduce((function(e,t){return e.set(t.symbol,t),e}),new Map);if(t){var o=new URLSearchParams(t).get("pair");if(o){var i=o.split("-");i.length>1&&((r.has(i[0])||_e(i[0]))&&(n=i[0]),(r.has(i[1])||_e(i[1]))&&(a=i[1]))}}return{defaultBase:n,defaultQuote:a}}(i,u.search),a=n.defaultBase,r=n.defaultQuote;a&&r&&(A((null===(e=i.find((function(e){return e.symbol===a})))||void 0===e?void 0:e.address)||(_e(a)?a:"")||""),T((null===(t=i.find((function(e){return e.symbol===r})))||void 0===t?void 0:t.address)||(_e(r)?r:"")||""))}}),[u,u.search,A,T,i]);var F=Object(a.useCallback)(Object(ee.a)(Z.a.mark((function e(){var t,n,a,r;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(C&&j&&B)){e.next=6;break}return m===j?(a=j,t=M,n=parseFloat(x)):(a=B,t=S,n=parseFloat(I)),e.next=4,Object(ie.e)(o,a,n,C,v);case 4:"string"===typeof(r=e.sent)?t(r):void 0!==r&&Number.isFinite(r)?t(r.toFixed(6)):t("");case 6:case"end":return e.stop()}}),e)}))),[C,j,B,S,M,x,I,o,m,v]);return Object(a.useEffect)((function(){F()}),[I,x,m,F]),r.a.createElement(We.Provider,{value:{A:O,B:N,lastTypedAccount:m,setLastTypedAccount:f,setPoolOperation:g,options:w,setOptions:E}},n)}var De=function(){return Object(a.useContext)(We)},_e=function(e){try{return 32===A.a.decode(e).length}catch(t){return!1}};var Re=function(e){return"Insufficient ".concat(e," funds")},ze=function(e,t,n,a,r){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return t?a.mintAddress?a.amount?r.mintAddress?r.amount?a.sufficientBalance()?o||r.sufficientBalance()?e:Re(Object(w.l)(n,r.mintAddress)):Re(Object(w.l)(n,a.mintAddress)):"Enter an amount":"Select a token":"Enter an amount":"Select a token":"Connect Wallet"},Ue=r.a.createElement(xe.a,{style:{fontSize:24},spin:!0}),Ve=function(){var e,t,n,o,i,c=Object(k.b)(),u=c.wallet,s=c.connect,d=c.connected,f=Object(q.d)(),b=Object(a.useState)(!1),y=Object(l.a)(b,2),v=y[0],g=y[1],h=Object(a.useState)("both"),E=Object(l.a)(h,2),O=E[0],j=E[1],A=De(),x=A.A,S=A.B,N=A.setLastTypedAccount,B=A.setPoolOperation,I=A.options,M=A.setOptions,C=Object(a.useState)(x.mintAddress),F=Object(l.a)(C,2),P=F[0],W=F[1],L=Object(ie.j)([null===x||void 0===x?void 0:x.mintAddress,null===S||void 0===S?void 0:S.mintAddress]),K=Object(q.f)().slippage,D=Object(q.e)().tokenMap,_=Object(Me.e)().swapLayout===je.TokenSwapLayout,R=d?function(){var e=Object(ee.a)(Z.a.mark((function e(t){var n,a,r;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=U(),_&&"one"===O&&(null===n||void 0===n?void 0:n.account)&&n.mint?(g(!0),a=[{account:n.account,mintAddress:n.mintAddress,amount:n.convertAmount()}],Object(ie.d)(f,u,a,K,t,I,O).then((function(){g(!1)})).catch((function(e){console.log("Transaction failed",e),Object(Ae.a)({description:"Please try again and approve transactions from your wallet",message:"Adding liquidity cancelled.",type:"error"}),g(!1)}))):x.account&&S.account&&x.mint&&S.mint&&(g(!0),r=[{account:x.account,mintAddress:x.mintAddress,amount:x.convertAmount()},{account:S.account,mintAddress:S.mintAddress,amount:S.convertAmount()}],I.curveType!==je.CurveType.ConstantProductWithOffset||t||(I.token_b_offset=r[1].amount,r[1].amount=0),Object(ie.d)(f,u,r,K,t,I).then((function(){g(!1)})).catch((function(e){console.log("Transaction failed",e),Object(Ae.a)({description:"Please try again and approve transactions from your wallet",message:"Adding liquidity cancelled.",type:"error"}),g(!1)})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}():s,z=x.sufficientBalance()&&S.sufficientBalance(),U=function(){if(P)return P===x.mintAddress?x:S},V=L&&r.a.createElement(m.a,{className:"add-button",type:"primary",size:"large",onClick:function(){return R()},disabled:d&&(v||!x.account||!S.account||x.account===S.account||!z)},ze("Create Liquidity Pool",d,D,x,S),v&&r.a.createElement(we.a,{indicator:Ue,className:"add-spinner"})),G=r.a.createElement(T.a.Button,{className:"add-button",onClick:function(){return R(L)},trigger:["click"],disabled:d&&("both"===O?v||!x.account||!S.account||x.account===S.account||!z:!(null===(e=U())||void 0===e?void 0:e.account)||!(null===(t=U())||void 0===t?void 0:t.sufficientBalance())),type:"primary",size:"large",overlay:r.a.createElement(Pe,{options:I,setOptions:M,action:V})},"both"===O?ze(L?"Provide Liquidity":"Create Liquidity Pool",d,D,x,S):function(e,t,n){return e?n?parseFloat(n.amount||"")?n.sufficientBalance()?"Provide Liquidity":Re(Object(w.l)(t,n.mintAddress)):"Enter an amount":"Select a token":"Connect Wallet"}(d,D,U()),v&&r.a.createElement(we.a,{indicator:Ue,className:"add-spinner"}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"input-card"},r.a.createElement(ke,{pool:L}),r.a.createElement(p.a,{trigger:"hover",content:r.a.createElement("div",{style:{width:300}},"Liquidity providers earn a fixed percentage fee on all trades proportional to their share of the pool. Fees are added to the pool, accrue in real time and can be claimed by withdrawing your liquidity.")},r.a.createElement(m.a,{type:"text"},"Read more about providing liquidity.")),_&&L&&r.a.createElement("div",{className:"flex-row-center"},r.a.createElement(Ee.a.Group,{style:{margin:"10px 0"},onChange:function(e){return function(e){e===(null===L||void 0===L?void 0:L.pubkeys.mint.toBase58())?j("both"):e===x.mintAddress?("one"!==O&&j("one"),W(x.mintAddress)):e===S.mintAddress&&("one"!==O&&j("one"),W(S.mintAddress))}(e.target.value)},value:"both"===O?null===L||void 0===L?void 0:L.pubkeys.mint.toBase58():null===(n=U())||void 0===n?void 0:n.mintAddress},function(){var e="",t="";return L&&(e=Object(w.j)(D,L),t=L.pubkeys.mint.toBase58()),r.a.createElement(r.a.Fragment,null,L&&r.a.createElement(Ee.a,{key:t,value:t,name:e},"Add ",e),[x,S].map((function(e){return r.a.createElement(Ee.a,{key:e.mintAddress,value:e.mintAddress,name:e.name},"Add ",e.name)})))}())),"both"===O&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Te,{title:"Input",onInputChange:function(e){B(ie.b.Add),x.amount!==e&&N(x.mintAddress),x.setAmount(e)},amount:x.amount,mint:x.mintAddress,onMintChange:function(e){x.setMint(e)}}),r.a.createElement("div",null,"+"),r.a.createElement(Te,{title:I.curveType===je.CurveType.ConstantProductWithOffset?"Offset":"Input",onInputChange:function(e){B(ie.b.Add),S.amount!==e&&N(S.mintAddress),S.setAmount(e)},amount:S.amount,mint:S.mintAddress,onMintChange:function(e){S.setMint(e)}})),"one"===O&&P&&r.a.createElement(Te,{title:"Input",onInputChange:function(e){var t;B(ie.b.Add);var n=U();n&&n.amount!==e&&N(n.mintAddress),null===(t=U())||void 0===t||t.setAmount(e)},amount:null===(o=U())||void 0===o?void 0:o.amount,mint:null===(i=U())||void 0===i?void 0:i.mintAddress,hideSelect:!0}),G,L&&r.a.createElement(Ge,{pool:L}),r.a.createElement(Se,{pool:L})),r.a.createElement(Ye,{pool:L}))},Ge=function(e){var t=e.pool,n=Object(a.useMemo)((function(){return[e.pool].filter((function(e){return e}))}),[e.pool]),o=de(n)[0],i=Object(S.j)().userAccounts,c=Object(S.h)(t.pubkeys.mint),u=i.filter((function(e){return t.pubkeys.mint.equals(e.info.mint)})).reduce((function(e,t){return t.info.amount.toNumber()+e}),0)/((null===c||void 0===c?void 0:c.supply.toNumber())||0);return o?r.a.createElement(v.a,{className:"ccy-input",style:{borderRadius:20,width:"100%"},bodyStyle:{padding:"7px"},size:"small",title:"Prices and pool share"},r.a.createElement(b.a,{style:{width:"100%"}},r.a.createElement(y.a,{span:8},w.g.format(parseFloat(o.liquidityA)/parseFloat(o.liquidityB))),r.a.createElement(y.a,{span:8},w.g.format(parseFloat(o.liquidityB)/parseFloat(o.liquidityA))),r.a.createElement(y.a,{span:8},100*u<.001&&u>0?"<":"","\xa0",w.g.format(100*u),"%")),r.a.createElement(b.a,{style:{width:"100%"}},r.a.createElement(y.a,{span:8},o.names[0]," per ",o.names[1]),r.a.createElement(y.a,{span:8},o.names[1]," per ",o.names[0]),r.a.createElement(y.a,{span:8},"Share of pool"))):null},Ye=function(e){var t=e.pool,n=Object(a.useMemo)((function(){return[e.pool].filter((function(e){return e}))}),[e.pool]),o=de(n)[0],i=Object(S.j)().userAccounts,c=Object(S.h)(null===t||void 0===t?void 0:t.pubkeys.mint);if(!t||!o)return null;var u=t.pubkeys.holdingMints[0].toBase58(),s=t.pubkeys.holdingMints[1].toBase58(),l=i.filter((function(e){return t.pubkeys.mint.equals(e.info.mint)})).reduce((function(e,t){return t.info.amount.toNumber()+e}),0)/((null===c||void 0===c?void 0:c.supply.toNumber())||0);return r.a.createElement(v.a,{className:"ccy-input",style:{borderRadius:20,width:"100%"},bodyStyle:{padding:"7px"},size:"small",title:"Your Position"},r.a.createElement("div",{className:"pool-card",style:{width:"initial"}},r.a.createElement("div",{className:"pool-card-row"},r.a.createElement("div",{className:"pool-card-cell"},r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},r.a.createElement(J,{mintA:u,mintB:s}),r.a.createElement("h3",{style:{margin:0}},null===o||void 0===o?void 0:o.name))),r.a.createElement("div",{className:"pool-card-cell"},r.a.createElement("h3",{style:{margin:0}},w.g.format(l*o.supply)))),r.a.createElement("div",{className:"pool-card-row",style:{margin:0}},r.a.createElement("div",{className:"pool-card-cell"},"Your Share:"),r.a.createElement("div",{className:"pool-card-cell"},100*l<.001&&l>0?"<":"",w.g.format(100*l),"%")),r.a.createElement("div",{className:"pool-card-row",style:{margin:0}},r.a.createElement("div",{className:"pool-card-cell"},o.names[0],":"),r.a.createElement("div",{className:"pool-card-cell"},w.g.format(l*o.liquidityA))),r.a.createElement("div",{className:"pool-card-row",style:{margin:0}},r.a.createElement("div",{className:"pool-card-cell"},o.names[1],":"),r.a.createElement("div",{className:"pool-card-cell"},w.g.format(l*o.liquidityB)))))},He=function(e){var t=e.instance,n=t.account,o=t.pool,i=e.removeRatio,c=e.withdrawType,u=e.amount,s=e.withdrawToken,d=Object(a.useState)(!1),p=Object(l.a)(d,2),f=p[0],b=p[1],y=Object(k.b)(),v=y.wallet,g=y.connected,h=Object(q.d)(),E=Object(q.e)().tokenMap,O=Object(S.h)(s),j=Object(Me.e)().swapLayout===je.TokenSwapLayout,A=i*n.info.amount.toNumber(),x=A<=n.info.amount.toNumber(),N=function(){var e=Object(ee.a)(Z.a.mark((function e(){var t;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,b(!0),"one"!==c||!j){e.next=8;break}return t=u*Math.pow(10,(null===O||void 0===O?void 0:O.decimals)||0),e.next=6,Object(ie.f)(h,v,n,A,t,s,o);case 6:e.next=10;break;case 8:return e.next=10,Object(ie.g)(h,v,A,n,o);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),Object(Ae.a)({description:"Please try again and approve transactions from your wallet",message:"Removing liquidity cancelled.",type:"error"});case 15:return e.prev=15,b(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[0,12,15,18]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(m.a,{className:"add-button",type:"primary",size:"large",onClick:N,disabled:g&&(f||!x||!n||!A)},function(e,t,n,a,r){return e?t?r?"Remove Liquidity":Re(Object(w.j)(a,n)):"Enter an amount":"Connect Wallet"}(g,A,o,E,x),f&&r.a.createElement(we.a,{indicator:r.a.createElement(xe.a,{style:{fontSize:24},spin:!0}),className:"add-spinner"}))},Je=function(e){var t=e.instance,n=t.account,o=t.pool,i=e.enriched,c=Object(a.useState)("slider"),u=Object(l.a)(c,2),s=u[0],p=u[1],f=Object(q.e)().tokenMap,g=Object(Me.e)().swapLayout===je.TokenSwapLayout,h=Object(S.h)(null===o||void 0===o?void 0:o.pubkeys.mint),k=Object(a.useState)("both"),E=Object(l.a)(k,2),O=E[0],j=E[1],A=Object(a.useState)(null===o||void 0===o?void 0:o.pubkeys.mint.toBase58()),x=Object(l.a)(A,2),N=x[0],B=x[1],T=((null===n||void 0===n?void 0:n.info.amount.toNumber())||0)/((null===h||void 0===h?void 0:h.supply.toNumber())||1),I=i.mints[0],M=i.mints[1],C=Object(a.useState)({amount:"initial",lastTyped:"pool",liquidityPercentage:100}),F=Object(l.a)(C,2),P=F[0],W=F[1],L=Object(a.useState)({pool:"Input",poolAmount:w.g.format(T*((null===i||void 0===i?void 0:i.supply)||0)*(P.liquidityPercentage/100)),tokenA:"Output (estimated)",tokenAAmount:w.g.format(T*((null===i||void 0===i?void 0:i.liquidityA)||0)*(P.liquidityPercentage/100)),tokenB:"Output (estimated)",tokenBAmount:w.g.format(T*((null===i||void 0===i?void 0:i.liquidityB)||0)*(P.liquidityPercentage/100))}),K=Object(l.a)(L,2),D=K[0],_=K[1];if(Object(a.useEffect)((function(){switch(P.lastTyped){case"pool":_({pool:"both"===O?"Input":"Output (Estimated)",poolAmount:"initial"!==P.amount?P.amount:w.g.format(T*((null===i||void 0===i?void 0:i.supply)||0)*(P.liquidityPercentage/100)),tokenA:"one"===O?"Input":"Output (Estimated)",tokenAAmount:w.g.format(T*((null===i||void 0===i?void 0:i.liquidityA)||0)*(P.liquidityPercentage/100)),tokenB:"one"===O?"Input":"Output (Estimated)",tokenBAmount:w.g.format(T*((null===i||void 0===i?void 0:i.liquidityB)||0)*(P.liquidityPercentage/100))});break;case"tokenA":_({pool:"both"===O?"Input":"Output (Estimated)",poolAmount:w.g.format(T*((null===i||void 0===i?void 0:i.supply)||0)*(P.liquidityPercentage/100)),tokenA:"one"===O?"Input":"Output (Estimated)",tokenAAmount:P.amount,tokenB:"one"===O?"Input":"Output (Estimated)",tokenBAmount:w.g.format(T*((null===i||void 0===i?void 0:i.liquidityB)||0)*(P.liquidityPercentage/100))});break;case"tokenB":_({pool:"both"===O?"Input":"Output (Estimated)",poolAmount:w.g.format(T*((null===i||void 0===i?void 0:i.supply)||0)*(P.liquidityPercentage/100)),tokenA:"one"===O?"Input":"Output (Estimated)",tokenAAmount:w.g.format(T*((null===i||void 0===i?void 0:i.liquidityA)||0)*(P.liquidityPercentage/100)),tokenB:"one"===O?"Input":"Output (Estimated)",tokenBAmount:P.amount});break;case"slider":_({pool:"both"===O?"Input":"Output (Estimated)",poolAmount:w.g.format(T*((null===i||void 0===i?void 0:i.supply)||0)*(P.liquidityPercentage/100)),tokenA:"one"===O?"Input":"Output (Estimated)",tokenAAmount:w.g.format(T*((null===i||void 0===i?void 0:i.liquidityA)||0)*(P.liquidityPercentage/100)),tokenB:"one"===O?"Input":"Output (Estimated)",tokenBAmount:w.g.format(T*((null===i||void 0===i?void 0:i.liquidityB)||0)*(P.liquidityPercentage/100))})}}),[P,i,T,P.liquidityPercentage,O]),Object(a.useEffect)((function(){"one"===O&&(N===I&&P.amount!==D.tokenAAmount?W(Object(Y.a)(Object(Y.a)({},P),{},{lastTyped:"tokenA",amount:D.tokenAAmount})):N===M&&P.amount!==D.tokenBAmount&&W(Object(Y.a)(Object(Y.a)({},P),{},{lastTyped:"tokenB",amount:D.tokenBAmount})))}),[N,O,I,M]),!o||!i)return null;var R=function(e,t){switch(t){case"pool":W({liquidityPercentage:100*e/(i.supply*T),amount:e,lastTyped:"pool"});break;case"tokenA":W({liquidityPercentage:100*e/(i.liquidityA*T),amount:e,lastTyped:"tokenA"});break;case"tokenB":W({liquidityPercentage:100*e/(i.liquidityB*T),amount:e,lastTyped:"tokenB"});break;case"slider":W(Object(Y.a)(Object(Y.a)({},P),{},{liquidityPercentage:e,lastTyped:"slider"}))}};return r.a.createElement(r.a.Fragment,null,"slider"===s&&r.a.createElement("div",{className:"input-card"},"Remove Liquidity",r.a.createElement(v.a,{className:"ccy-input",style:{borderRadius:20,width:"100%"},size:"small"},r.a.createElement("div",{className:"pool-card",style:{width:"initial"}},r.a.createElement("div",{className:"pool-card-row"},r.a.createElement("div",{className:"pool-card-cell"},"Amount"),r.a.createElement("div",{className:"pool-card-cell"},r.a.createElement(m.a,{onClick:function(){return p("input")}},"Detailed"))),r.a.createElement("div",{className:"pool-card-row"},r.a.createElement("div",{className:"pool-card-cell"},r.a.createElement(d.a.Text,{style:{fontSize:"42px"}},w.g.format(P.liquidityPercentage),"%"))),r.a.createElement("div",{className:"pool-card-row"},r.a.createElement(Oe.a,{style:{width:"100%"},value:P.liquidityPercentage,tipFormatter:function(e){return"".concat(e,"%")},min:0,max:100,onChange:function(e){return W(Object(Y.a)(Object(Y.a)({},P),{},{liquidityPercentage:e,lastTyped:"slider"}))}})),r.a.createElement(b.a,null,r.a.createElement(y.a,{span:6},r.a.createElement(m.a,{onClick:function(){return W(Object(Y.a)(Object(Y.a)({},P),{},{liquidityPercentage:25,lastTyped:"slider"}))}},"25%")),r.a.createElement(y.a,{span:6},r.a.createElement(m.a,{onClick:function(){return W(Object(Y.a)(Object(Y.a)({},P),{},{liquidityPercentage:50,lastTyped:"slider"}))}},"50%")),r.a.createElement(y.a,{span:6},r.a.createElement(m.a,{onClick:function(){return W(Object(Y.a)(Object(Y.a)({},P),{},{liquidityPercentage:75,lastTyped:"slider"}))}},"75%")),r.a.createElement(y.a,{span:6},r.a.createElement(m.a,{onClick:function(){return W(Object(Y.a)(Object(Y.a)({},P),{},{liquidityPercentage:100,lastTyped:"slider"}))}},"100%"))))),"\u2193",r.a.createElement(v.a,{className:"ccy-input",style:{borderRadius:20,width:"100%"},size:"small"},r.a.createElement("div",{className:"pool-card",style:{width:"initial"}},r.a.createElement("div",{className:"pool-card-row"},r.a.createElement("div",{className:"pool-card-cell"},w.g.format(T*i.liquidityA*(P.liquidityPercentage/100))),r.a.createElement("div",{className:"pool-card-cell"},r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},r.a.createElement(H,{mintAddress:I}),r.a.createElement("h3",{style:{margin:0}},null===i||void 0===i?void 0:i.names[0])))),r.a.createElement("div",{className:"pool-card-row"},r.a.createElement("div",{className:"pool-card-cell"},w.g.format(T*i.liquidityB*(P.liquidityPercentage/100))),r.a.createElement("div",{className:"pool-card-cell"},r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},r.a.createElement(H,{mintAddress:M}),r.a.createElement("h3",{style:{margin:0}},i.names[1]))))))),"input"===s&&r.a.createElement("div",{className:"input-card"},"Remove Liquidity",g&&o&&r.a.createElement("div",{className:"flex-row-center"},r.a.createElement(Ee.a.Group,{style:{margin:"10px 0"},onChange:function(e){return function(e){e===(null===o||void 0===o?void 0:o.pubkeys.mint.toBase58())?(j("both"),B(null===o||void 0===o?void 0:o.pubkeys.mint.toBase58())):e===i.mints[0]?("one"!==O&&j("one"),B(i.mints[0])):e===i.mints[1]&&("one"!==O&&j("one"),B(i.mints[1]))}(e.target.value)},value:"both"===O?null===o||void 0===o?void 0:o.pubkeys.mint.toBase58():N},function(){if(o){var e=Object(w.j)(f,o),t=o.pubkeys.mint.toBase58();return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ee.a,{key:t,value:t,name:e},e),o.pubkeys.holdingMints.map((function(e){var t=e.toBase58(),n=Object(w.l)(f,t);return r.a.createElement(Ee.a,{key:t,value:t,name:n},n)})))}return null}())),r.a.createElement(v.a,{className:"ccy-input",style:{borderRadius:20,width:"100%"},size:"small"},r.a.createElement("div",{className:"pool-card",style:{width:"initial"}},r.a.createElement("div",{className:"pool-card-row"},r.a.createElement("div",{className:"pool-card-cell"},"Amount Estimated"),r.a.createElement("div",{className:"pool-card-cell"},r.a.createElement(m.a,{onClick:function(){return p("slider")}},"Simple"))),r.a.createElement("div",{className:"pool-card-row"},r.a.createElement("div",{className:"pool-card-cell"},r.a.createElement(d.a.Text,{style:{fontSize:"42px"}},w.g.format(P.liquidityPercentage),"%")))),r.a.createElement("div",{className:"pool-card-row"},r.a.createElement(Oe.a,{style:{width:"100%"},value:P.liquidityPercentage,tipFormatter:function(e){return"".concat(e,"%")},min:0,max:100,onChange:function(e){return R(e,"slider")}})),r.a.createElement(b.a,null,r.a.createElement(y.a,{span:6},r.a.createElement(m.a,{onClick:function(){return R(25,"slider")}},"25%")),r.a.createElement(y.a,{span:6},r.a.createElement(m.a,{onClick:function(){return R(50,"slider")}},"50%")),r.a.createElement(y.a,{span:6},r.a.createElement(m.a,{onClick:function(){return R(75,"slider")}},"75%")),r.a.createElement(y.a,{span:6},r.a.createElement(m.a,{onClick:function(){return R(100,"slider")}},"100%")))),r.a.createElement(Ie,{mint:o.pubkeys.mint.toBase58(),pool:o,title:D.pool,amount:D.poolAmount,onInputChange:function(e){R(e,"pool")}}),"\u2193",("both"===O||N===I)&&r.a.createElement(Ie,{mint:I,title:D.tokenA,amount:D.tokenAAmount,onInputChange:function(e){R(e,"tokenA")}}),"both"===O&&"+",("both"===O||N===M)&&r.a.createElement(Ie,{mint:M,title:D.tokenB,amount:D.tokenBAmount,onInputChange:function(e){R(e,"tokenB")}})),n&&r.a.createElement(He,{instance:{pool:o,account:n},removeRatio:P.liquidityPercentage/100,withdrawType:O,amount:N===I?parseFloat(D.tokenAAmount):parseFloat(D.tokenBAmount),withdrawToken:N}),r.a.createElement(Ye,{pool:o}))},Qe=(n(509),n(202)),Xe={volume:"https://serum-api.bonfida.com/pools/volumes",liquidity:"https://serum-api.bonfida.com/pools/liquidity"},$e=r.a.memo((function(e){var t,n=e.pool,o=e.api,i=e.limit,c=e.chartName,u=e.current,s=Object(a.useRef)(null),p=Object(a.useRef)(null),m=Object(a.useState)(!0),f=Object(l.a)(m,2),b=f[0],y=f[1],v="",g=Object(a.useRef)(0);if(n){var h=n.pubkeys.holdingMints[0].toBase58(),k=n.pubkeys.holdingMints[1].toBase58();v="?mintA=".concat(h,"&mintB=").concat(k)}t=Xe[o];var w=Object(a.useCallback)(Object(ee.a)(Z.a.mark((function e(){var n,a,r;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,window.fetch("".concat(t).concat(v));case 3:return n=e.sent,e.next=6,n.json();case 6:a=e.sent,r=(null===a||void 0===a?void 0:a.data)||[],i&&r&&(r=r.slice(0,i)),E(r),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(0);case 14:g.current=window.setTimeout((function(){return w()}),18e5);case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),[]),E=function(t){y(!1),p.current&&p.current.setOption({textStyle:{color:"#fff"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{containLabel:!0,left:0,right:0},xAxis:[{inverse:!0,type:"category",data:e.getComputedTime(t)}],yAxis:[{type:"value",scale:!0,splitLine:!1}],series:[{type:"".concat(e.type||"line"),data:e.getComputedData(t)}]})};return Object(a.useEffect)((function(){return s.current&&(p.current=X.a.init(s.current)),w(),function(){p.current.dispose(),window.clearTimeout(g.current)}}),[]),r.a.createElement(r.a.Fragment,null,b&&r.a.createElement(we.a,{tip:"Loading..."}),!b&&r.a.createElement(d.a.Title,{level:4},c," ",u||""),r.a.createElement("div",{ref:s,style:{height:"250px",width:"100%"}}))})),Ze=r.a.memo((function(e){var t="Volume";return e.current&&(t="Volume (24H)"),r.a.createElement($e,{pool:e.pool,limit:e.pool?7:0,api:"volume",type:"bar",chartName:t,current:e.current,getComputedData:function(e){return e.map((function(e){return e.volume}))},getComputedTime:function(e){return e.map((function(e){return w.h.format(new Date(e.time))}))}})})),et=r.a.memo((function(e){var t=function(e){var t,n={},a=Object(Qe.a)(e);try{for(a.s();!(t=a.n()).done;){var r=t.value;n[r.time]||(n[r.time]=0),n[r.time]=n[r.time]+r.liquidityAinUsd+r.liquidityBinUsd}}catch(o){a.e(o)}finally{a.f()}return n},n="Liquidity";return e.current&&(n="Total Liquidity"),r.a.createElement($e,{pool:e.pool,limit:e.pool?7:0,api:"liquidity",type:"line",chartName:n,current:e.current,getComputedData:function(e){var n=t(e);return Object.values(n)},getComputedTime:function(e){var n=t(e);return Object.keys(n).map((function(e){return w.h.format(new Date(parseInt(e)))}))}})})),tt=(r.a.memo((function(e){var t=Object(q.e)().tokenMap,n=e.pool,a=n.pubkeys.holdingMints[0].toBase58(),o=n.pubkeys.holdingMints[1].toBase58(),i=Object(w.j)(t,n);return r.a.createElement(v.a,{className:"pool-card",title:r.a.createElement(r.a.Fragment,null,r.a.createElement(J,{mintA:a,mintB:o,className:"left-icon"}),i)},r.a.createElement(et,{pool:n}),r.a.createElement(Ze,{pool:n}))})),n(1131)),nt=n(1132),at=d.a.Text,rt=function(e){var t=Object(a.useMemo)((function(){return[e.pool].filter((function(e){return e}))}),[e.pool]),n=Object(a.useState)("card"),o=Object(l.a)(n,2),i=o[0],c=o[1],u=de(t)[0],s=Object(S.j)().userAccounts,d=e.pool,f=e.account,b=d.pubkeys.holdingMints[0].toBase58(),y=d.pubkeys.holdingMints[1].toBase58(),g=Object(S.h)(d.pubkeys.mint),h=((null===f||void 0===f?void 0:f.info.amount.toNumber())||0)/((null===g||void 0===g?void 0:g.supply.toNumber())||0);if(!u)return null;var k={fontSize:11},E=s.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"pool-card-row"},r.a.createElement(at,{type:"secondary",className:"pool-card-cell "},"Your liquidity:"),r.a.createElement("div",{className:"pool-card-cell "},r.a.createElement("div",{className:"left"},r.a.createElement("div",null,w.i.format(h*u.liquidity)),r.a.createElement("div",null,r.a.createElement(at,{type:"secondary",style:k},w.e.format(h*u.liquidityA)," ",u.names[0])),r.a.createElement("div",null,r.a.createElement(at,{type:"secondary",style:k},w.e.format(h*u.liquidityB)," ",u.names[1]))))),r.a.createElement("div",{className:"pool-card-row"},r.a.createElement(at,{type:"secondary",className:"pool-card-cell "},"Your quantity:"),r.a.createElement("div",{className:"pool-card-cell "},h*u.supply)),r.a.createElement("div",{className:"pool-card-row"},r.a.createElement(at,{type:"secondary",className:"pool-card-cell "},"Your fees (24h):"),r.a.createElement("div",{className:"pool-card-cell ",title:"".concat(u.fees24h*h)},u.fees24h*h<.005?"< ":"",w.i.format(u.fees24h*h))),r.a.createElement("hr",null));return r.a.createElement(v.a,{className:"pool-card",title:r.a.createElement(r.a.Fragment,null,r.a.createElement(J,{mintA:b,mintB:y,className:"left-icon"}),null===u||void 0===u?void 0:u.name,r.a.createElement(p.a,{placement:"topRight",trigger:"hover",className:"right-icon",content:"Show ".concat("card"===i?"historical":"current"," data")},"remove"===i?r.a.createElement(m.a,{shape:"circle",size:"middle",type:"text",icon:r.a.createElement(tt.a,null),onClick:function(){return c("card")}}):r.a.createElement(m.a,{shape:"circle",size:"middle",type:"text",icon:"card"===i?r.a.createElement(nt.a,null):r.a.createElement(tt.a,null),onClick:function(){c("card"===i?"chart":"card")}})))},"card"===i&&r.a.createElement(r.a.Fragment,null,E,r.a.createElement("div",{className:"pool-card-row"},r.a.createElement(at,{type:"secondary",className:"pool-card-cell "},"Pool Liquidity:"),r.a.createElement("div",{className:"pool-card-cell "},r.a.createElement("div",{className:"left"},r.a.createElement("div",null,w.i.format(u.liquidity)),r.a.createElement("div",null,r.a.createElement(at,{type:"secondary",style:k},w.e.format(u.liquidityA)," ",u.names[0])),r.a.createElement("div",null,r.a.createElement(at,{type:"secondary",style:k},w.e.format(u.liquidityB)," ",u.names[1]))))),r.a.createElement("div",{className:"pool-card-row"},r.a.createElement(at,{type:"secondary",className:"pool-card-cell "},"LP Supply:"),r.a.createElement("div",{className:"pool-card-cell ",title:u.supply},w.e.format(u.supply))),r.a.createElement("div",{className:"pool-card-row"},r.a.createElement(at,{type:"secondary",className:"pool-card-cell "},"Value per token:"),r.a.createElement("div",{className:"pool-card-cell "},w.i.format(u.liquidity/u.supply))),r.a.createElement("div",{className:"pool-card-row"},r.a.createElement(at,{type:"secondary",className:"pool-card-cell "},"Volume (24h):"),r.a.createElement("div",{className:"pool-card-cell "},w.i.format(u.volume24h))),r.a.createElement("div",{className:"pool-card-row"},r.a.createElement(at,{type:"secondary",className:"pool-card-cell "},"Fees (24h):"),r.a.createElement("div",{className:"pool-card-cell "},w.i.format(u.fees24h))),r.a.createElement("div",{className:"pool-card-row"},r.a.createElement(at,{type:"secondary",className:"pool-card-cell "},"Approx. APY (24h):"),r.a.createElement("div",{className:"pool-card-cell "},w.f.format(u.apy24h))),r.a.createElement("div",{className:"pool-card-row"},r.a.createElement(at,{type:"secondary",className:"pool-card-cell "},"Address:"),r.a.createElement("div",{className:"pool-card-cell "},r.a.createElement("div",{className:"left"},r.a.createElement("div",null,r.a.createElement(I.a,{address:u.address,type:"account",length:4})),r.a.createElement("div",{className:"small"},r.a.createElement(I.a,{address:u.accounts[0],type:"account",style:k,length:4}),r.a.createElement(at,{type:"secondary",style:k}," ",u.names[0])),r.a.createElement("div",{className:"small"},r.a.createElement(I.a,{address:u.accounts[1],type:"account",style:k,length:4}),r.a.createElement(at,{type:"secondary",style:k}," ",u.names[1]))))),r.a.createElement(Se,{pool:d}),r.a.createElement("div",{className:"pool-card-row"},e.account&&r.a.createElement(m.a,{onClick:function(){c("card"===i?"remove":"card")}},"Remove"))),"chart"===i&&r.a.createElement(r.a.Fragment,null,r.a.createElement(et,{pool:d,current:w.i.format(u.liquidity)}),r.a.createElement(Ze,{pool:d,current:w.i.format(u.volume24h)})),"remove"===i&&f&&r.a.createElement(Je,{instance:{pool:d,account:f},enriched:u}))},ot=n(1124),it=n(43),ct=n(145),ut=(n(1042),function(e){var t,n,a=e.item,o=Object(S.h)(a.account.info.mint.toBase58()),i=a.account.info.amount.toNumber()/Math.pow(10,(null===o||void 0===o?void 0:o.decimals)||0),c=(null===o||void 0===o?void 0:o.supply.toNumber())||0,u=a.account.info.amount.toNumber()/c,s=u*(null===(t=e.poolDetails)||void 0===t?void 0:t.liquidity),l=u*(null===(n=e.poolDetails)||void 0===n?void 0:n.fees);if(!i)return null;var d,p=a.pool.pubkeys.holdingMints.map((function(e){return e.toBase58()})).sort();return a?r.a.createElement("div",{className:"pool-item-row",title:"LP Token: ".concat(e.item.pool.pubkeys.mint.toBase58(),", account: ").concat(e.item.account.pubkey.toBase58())},r.a.createElement(J,{mintA:p[0],mintB:p[1],style:{marginLeft:"0.5rem"}}),r.a.createElement("div",{className:"pool-item-name"},null===(d=e.poolDetails)||void 0===d?void 0:d.name),r.a.createElement("div",{className:"pool-item-amount"},w.i.format(s)),r.a.createElement("div",{className:"pool-item-amount"},w.i.format(l)),r.a.createElement("div",{className:"pool-item-type",title:"Fee account"},a.isFeeAccount?" (F) ":" ")):null}),st=function(e){var t=Object(ie.i)(e.legacy),n=Object(a.useMemo)((function(){return t.map((function(e){return e.pool}))}),[t]),o=de(n);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,"Your Liquidity"),r.a.createElement(it.b,{renderEmpty:function(){return r.a.createElement(ct.a,{image:ct.a.PRESENTED_IMAGE_SIMPLE,description:"No liquidity found."})}},r.a.createElement("div",{className:"pools-grid"},r.a.createElement("div",{className:"pool-item-header"},r.a.createElement("div",{style:{width:48}}),r.a.createElement("div",{className:"pool-item-name"},"Pool"),r.a.createElement("div",{className:"pool-item-amount"},"Liquidity"),r.a.createElement("div",{className:"pool-item-amount"},"Fees"),r.a.createElement("div",{className:"pool-item-type"}),r.a.createElement("div",null)),t.map((function(e){return r.a.createElement(ut,{key:null===e||void 0===e?void 0:e.account.pubkey.toBase58(),item:e,poolDetails:o.find((function(t){return t.raw===e.pool}))})})))))},lt=function(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=t[0],o=t[1],i=Object(a.useState)(!1),c=Object(l.a)(i,2),u=c[0],s=c[1],d=Object(a.useState)(!1),p=Object(l.a)(d,2),f=p[0],b=p[1],y=Object(a.useState)(!1),v=Object(l.a)(y,2),g=v[0],h=v[1],w=Object(k.b)(),E=w.wallet,O=w.connected,j=Object(q.d)(),A=Object(q.f)().slippage,x=Object(S.g)(),N=Object(ie.i)(!0),B=Object(a.useMemo)((function(){return N.map((function(e){var t=e.account,n=e.pool,a=x.pools.find((function(e){return e.pubkeys.holdingMints[0].equals(n.pubkeys.holdingMints[0])&&e.pubkeys.holdingMints[1].equals(n.pubkeys.holdingMints[1])||e.pubkeys.holdingMints[0].equals(n.pubkeys.holdingMints[1])&&e.pubkeys.holdingMints[1].equals(n.pubkeys.holdingMints[0])}));return{account:t,fromPool:n,toPool:a}})).filter((function(e){return void 0!==e.toPool}))}),[x,N]),T=Object(a.useCallback)(Object(ee.a)(Z.a.mark((function e(){var t,n,a,r,o,i,c,u,l,d,p,m,f,y;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s(!0),b(!0),t=0;case 3:if(!(t<B.length)){e.next=37;break}return e.prev=4,n=B[t],a=n.account,r=n.fromPool,o=n.toPool,i=a.info.amount.toNumber(),e.next=12,S.c.queryMint(j,r.pubkeys.mint);case 12:return c=e.sent,e.next=15,S.c.queryAccount(j,r.pubkeys.holdingAccounts[0]);case 15:return u=e.sent,e.next=18,S.c.queryAccount(j,r.pubkeys.holdingAccounts[1]);case 18:return l=e.sent,d=i/c.supply.toNumber(),p=Math.floor(u.info.amount.toNumber()*d),m=Math.floor(l.info.amount.toNumber()*d),e.next=24,Object(ie.g)(j,E,i,a,r);case 24:return f=e.sent,r.pubkeys.holdingMints[0].toBase58()===(null===o||void 0===o?void 0:o.pubkeys.holdingMints[0].toBase58())||f.reverse(),y=[{amount:p,account:S.c.getAccount(f[0]),mintAddress:(null===o||void 0===o?void 0:o.pubkeys.holdingMints[0].toBase58())||""},{amount:m,account:S.c.getAccount(f[1]),mintAddress:(null===o||void 0===o?void 0:o.pubkeys.holdingMints[1].toBase58())||""}],e.next=30,Object(ie.d)(j,E,y,A,o);case 30:e.next=34;break;case 32:e.prev=32,e.t0=e.catch(4);case 34:t++,e.next=3;break;case 37:b(!1),h(!0);case 39:case"end":return e.stop()}}),e,null,[[4,32]])}))),[j,E,A,s,B]),I=Object(a.useCallback)((function(){s(!0),f||o(!1)}),[f,o,s]);return Object(a.useEffect)((function(){B.length>0&&!u&&o(!0)}),[B,O,u]),r.a.createElement(ot.a,{visible:n,title:"Liquidity migration",onOk:T,onCancel:I,closable:!f,footer:g?[]:[r.a.createElement(m.a,{key:"back",onClick:I,disabled:f},"Ask me later"),r.a.createElement(m.a,{key:"submit",type:"primary",loading:f,onClick:T},"Migrate")]},g?r.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-around",alignItems:"center"}},r.a.createElement("h2",null,"Congratulations!"),r.a.createElement("div",null,"Your migration has been successful."),r.a.createElement(m.a,{type:"primary",onClick:T},"Close")):r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"You are identified as liquidity provider that used v1 of Serum Swap."),r.a.createElement("p",null,"Please click migrate button to move to new version of the contract"),r.a.createElement("p",null,"During migration your wallet will ask for multiple approvals."),r.a.createElement(st,{legacy:!0})))},dt=d.a.Text,pt=D.a.Search,mt=function(e){var t=Object(a.useState)(""),n=Object(l.a)(t,2),o=n[0],i=n[1],c=Object(a.useState)(e.val),u=Object(l.a)(c,1)[0];return Object(a.useEffect)((function(){e.val!==u&&(i(e.val>u?"flash-positive":"flash-negative"),setTimeout((function(){return i("")}),200))}),[e.text,e.val,u]),r.a.createElement("span",{className:o},e.text)},ft=r.a.memo((function(){var e=Object(a.useState)(""),t=Object(l.a)(e,2),n=t[0],o=t[1],i=Object(a.useState)((function(){return{liquidity:0,volume:0,fees:0}})),c=Object(l.a)(i,2),u=c[0],s=c[1],d=Object(a.useRef)(null),h=Object(a.useRef)(null),k=Object(ie.k)().pools,E=de(k),O=Object(w.o)("infoDisplayType","Table"),j=Object(l.a)(O,2),A=j[0],x=j[1];Object(a.useEffect)((function(){return d.current&&(h.current=X.a.init(d.current)),function(){h.current.dispose()}}),[]);var S=Object(a.useMemo)((function(){try{return new RegExp(n,"i")}catch(e){}}),[n]),N=Object(a.useCallback)((function(){h.current&&h.current.setOption({series:[{name:"Liquidity",type:"treemap",top:0,bottom:10,left:30,right:30,animation:!1,label:{show:!0,formatter:"{b}"},itemStyle:{normal:{borderColor:"#000"}},breadcrumb:{show:!1},data:E.filter((function(e){return!n||!S||S.test(e.name)})).map((function(e){return{value:e.liquidity,name:e.name,path:"Liquidity/".concat(e.name),data:e}}))}]})}),[E,n,S]);Object(a.useEffect)((function(){s(E.reduce((function(e,t){return e.liquidity=e.liquidity+t.liquidity,e.volume=e.volume+t.volume24h,e.fees=e.fees+t.fees,e}),{liquidity:0,volume:0,fees:0})),N()}),[E,N,n]);var B=[{title:"Name",dataIndex:"name",key:"name",render:function(e,t){return{props:{style:{}},children:r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(J,{mintA:t.mints[0],mintB:t.mints[1]}),r.a.createElement("a",{href:t.link,target:"_blank",rel:"noopener noreferrer"},e))}}},{title:"Liquidity",dataIndex:"liquidity",key:"liquidity",render:function(e,t){return{props:{style:{textAlign:"right"}},children:r.a.createElement("div",null,r.a.createElement("div",null,w.i.format(t.liquidity)),r.a.createElement("div",null,r.a.createElement(dt,{type:"secondary",style:{fontSize:11}},w.e.format(t.liquidityA)," ",t.names[0])),r.a.createElement("div",null,r.a.createElement(dt,{type:"secondary",style:{fontSize:11}},w.e.format(t.liquidityB)," ",t.names[1])))}},sorter:function(e,t){return e.liquidity-t.liquidity},defaultSortOrder:"descend"},{title:"Supply",dataIndex:"supply",key:"supply",render:function(e,t){return{props:{style:{textAlign:"right"}},children:r.a.createElement(mt,{text:e,val:t.supply})}},sorter:function(e,t){return e.supply-t.supply}},{title:"Volume (24h)",dataIndex:"volume",key:"volume",render:function(e,t){return{props:{style:{textAlign:"right"}},children:r.a.createElement(mt,{text:w.i.format(t.volume24h),val:t.volume24h})}},sorter:function(e,t){return e.volume24h-t.volume24h}},{title:"Fees (24h)",dataIndex:"fees24h",key:"fees24h",render:function(e,t){return{props:{style:{textAlign:"right"}},children:r.a.createElement(mt,{text:w.i.format(t.fees24h),val:t.fees24h})}},sorter:function(e,t){return e.fees24h-t.fees24h}},{title:"APY",dataIndex:"apy",key:"apy",render:function(e,t){return{props:{style:{textAlign:"right"}},children:w.f.format(t.apy)}},sorter:function(e,t){return e.apy-t.apy}},{title:"Address",dataIndex:"address",key:"address",render:function(e,t){return{props:{style:{fontFamily:"monospace"}},children:r.a.createElement(ge,{pool:t.raw})}}}];return r.a.createElement(r.a.Fragment,null,r.a.createElement(C,{right:r.a.createElement(p.a,{placement:"topRight",title:"Settings",content:r.a.createElement(z,null),trigger:"click"},r.a.createElement(m.a,{shape:"circle",size:"large",type:"text",icon:r.a.createElement(U.a,null)}))}),r.a.createElement("div",{className:"info-header"},r.a.createElement(pt,{className:"search-input",placeholder:"Filter",type:"search",value:n,onChange:function(e){return o(e.target.value)},onSearch:function(e){return o(e)},style:{width:200}}),r.a.createElement(f.a,{title:"Show as table"},r.a.createElement(m.a,{size:"small",type:"Table"===A?"primary":"text",onClick:function(){return x("Table")},icon:r.a.createElement(V.a,null)})),r.a.createElement(f.a,{title:"Show as cards"},r.a.createElement(m.a,{size:"small",type:"Card"===A?"primary":"text",onClick:function(){return x("Card")},icon:r.a.createElement(G.a,null)}))),r.a.createElement(b.a,{gutter:16,style:{padding:"0px 30px",margin:"30px 0px"}},r.a.createElement(y.a,{span:12},r.a.createElement(v.a,null,r.a.createElement(et,{current:w.i.format(u.liquidity)}))),r.a.createElement(y.a,{span:12},r.a.createElement(v.a,null,r.a.createElement(Ze,{current:w.i.format(u.volume)})))),r.a.createElement("div",{ref:d,style:{height:"250px",width:"100%"}}),"Table"===A?r.a.createElement(g.a,{dataSource:E.filter((function(e){return!n||!S||S.test(e.name)})),columns:B,size:"small",pagination:{pageSize:10}}):r.a.createElement("div",{className:"pool-grid"},E.sort((function(e,t){return t.liquidity-e.liquidity})).map((function(e){return r.a.createElement(rt,{pool:e.raw})}))),r.a.createElement(lt,null))})),bt=function(){var e=Object(ie.i)(),t=Object(k.b)().connected;return r.a.createElement(r.a.Fragment,null,r.a.createElement(C,{right:r.a.createElement(p.a,{placement:"topRight",title:"Settings",content:r.a.createElement(z,null),trigger:"click"},r.a.createElement(m.a,{shape:"circle",size:"large",type:"text",icon:r.a.createElement(U.a,null)}))}),r.a.createElement("div",{className:"pool-grid"},e.map((function(e){return r.a.createElement(rt,{key:e.pool.pubkeys.account.toBase58(),pool:e.pool,account:e.account})})),!t&&r.a.createElement("h3",null,"Connect to a wallet to view your liquidity.")),r.a.createElement(lt,null))},yt=n(1135),vt=n(1136),gt=(n(1118),d.a.Text),ht=r.a.createElement(xe.a,{style:{fontSize:24},spin:!0}),kt=function(){var e,t,n=Object(k.b)(),o=n.wallet,i=n.connect,c=n.connected,u=Object(q.d)(),s=Object(a.useState)(!1),d=Object(l.a)(s,2),p=d[0],f=d[1],b=De(),y=b.A,v=b.B,g=b.setLastTypedAccount,h=b.setPoolOperation,E=Object(ie.j)([null===y||void 0===y?void 0:y.mintAddress,null===v||void 0===v?void 0:v.mintAddress]),O=Object(q.f)().slippage,j=Object(q.e)().tokenMap,A=function(){var e=Object(ee.a)(Z.a.mark((function e(){var t;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y.account||!v.mintAddress){e.next=14;break}return e.prev=1,f(!0),t=[{account:y.account,mintAddress:y.mintAddress,amount:y.convertAmount()},{mintAddress:v.mintAddress,amount:v.convertAmount()}],e.next=6,Object(ie.h)(u,o,t,O,E);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),Object(Ae.a)({description:"Please try again and approve transactions from your wallet",message:"Swap trade cancelled.",type:"error"});case 11:return e.prev=11,f(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"input-card"},r.a.createElement(ke,{pool:E}),r.a.createElement(Te,{title:"Input",onInputChange:function(e){h(ie.b.SwapGivenInput),y.amount!==e&&g(y.mintAddress),y.setAmount(e)},amount:y.amount,mint:y.mintAddress,onMintChange:function(e){y.setMint(e)}}),r.a.createElement(m.a,{type:"primary",className:"swap-button",onClick:function(){var e=y.mintAddress,t=y.amount;y.setMint(v.mintAddress),y.setAmount(v.amount),v.setMint(e),v.setAmount(t),h((function(e){switch(+e){case ie.b.SwapGivenInput:return ie.b.SwapGivenProceeds;case ie.b.SwapGivenProceeds:case ie.b.Add:return ie.b.SwapGivenInput}}))}},"\u21c5"),r.a.createElement(Te,{title:"To (Estimate)",onInputChange:function(e){h(ie.b.SwapGivenProceeds),v.amount!==e&&g(v.mintAddress),v.setAmount(e)},amount:v.amount,mint:v.mintAddress,onMintChange:function(e){v.setMint(e)}})),r.a.createElement(m.a,{className:"trade-button",type:"primary",size:"large",onClick:c?A:i,style:{width:"100%"},disabled:c&&(p||!y.account||!v.mintAddress||y.account===v.account||!y.sufficientBalance()||!E)},ze(E?"Swap":(e=Object(w.l)(j,y.mintAddress),t=Object(w.l)(j,v.mintAddress),"Pool ".concat(e,"/").concat(t," doesn't exsist")),c,j,y,v,!0),p&&r.a.createElement(we.a,{indicator:ht,className:"add-spinner"})),r.a.createElement(wt,{pool:E}))},wt=function(e){var t=De(),n=t.A,o=t.B,i=e.pool,c=Object(q.f)().slippage,u=Object(a.useMemo)((function(){return i?[i]:[]}),[i]),s=de(u),d=Object(a.useState)(0),f=Object(l.a)(d,2),b=f[0],y=f[1],v=Object(a.useState)(0),g=Object(l.a)(v,2),h=g[0],k=g[1],E=Object(a.useState)(0),O=Object(l.a)(E,2),j=O[0],A=O[1],x=Object(a.useState)(0),S=Object(l.a)(x,2),N=S[0],B=S[1],T=Object(a.useState)(""),I=Object(l.a)(T,2),M=I[0],C=I[1];Object(a.useEffect)((function(){if(i&&0!==s.length){if(o.amount){var e=parseFloat(null===o||void 0===o?void 0:o.amount)*(1-c);y(e)}var t=s[0].liquidityA/s[0].liquidityB,a=n.mintAddress===s[0].mints[0]?n:o,r=a.mintAddress===n.mintAddress?o:n,u=parseFloat(a.amount)/parseFloat(r.amount);k(Math.abs(100-100*u/t));var l=(parseFloat(n.amount)*ie.a).toFixed(6);A(parseFloat(l)),M===o.mintAddress?B(parseFloat(o.amount)/parseFloat(n.amount)):B(parseFloat(n.amount)/parseFloat(o.amount))}}),[n,o,c,i,s,M]);return parseFloat(o.amount)?r.a.createElement("div",{className:"pool-card",style:{width:"initial"}},r.a.createElement("div",{className:"pool-card-row"},r.a.createElement(gt,{className:"pool-card-cell"},"Price"),r.a.createElement("div",{className:"pool-card-cell ",title:N.toString()},r.a.createElement(m.a,{shape:"circle",size:"middle",type:"text",icon:r.a.createElement(yt.a,null),onClick:function(){M!==o.mintAddress?C(o.mintAddress):C(n.mintAddress)}},N.toFixed(6),"\xa0",M===o.mintAddress?o.name:n.name," per\xa0",M===o.mintAddress?n.name:o.name,"\xa0"))),r.a.createElement("div",{className:"pool-card-row"},r.a.createElement(gt,{className:"pool-card-cell"},r.a.createElement(p.a,{trigger:"hover",content:r.a.createElement("div",{style:{width:300}},"You transaction will revert if there is a large, unfavorable price movement before it is confirmed.")},"Minimum Received ",r.a.createElement(vt.a,null))),r.a.createElement("div",{className:"pool-card-cell ",title:b.toString()},b.toFixed(6)," ",o.name)),r.a.createElement("div",{className:"pool-card-row"},r.a.createElement(gt,{className:"pool-card-cell"},r.a.createElement(p.a,{trigger:"hover",content:r.a.createElement("div",{style:{width:300}},"The difference between the market price and estimated price due to trade size.")},"Price Impact ",r.a.createElement(vt.a,null))),r.a.createElement("div",{className:"pool-card-cell ",title:h.toString(),style:{color:Object(w.c)(h)}},h<.01?"< 0.01%":h.toFixed(3)+"%")),r.a.createElement("div",{className:"pool-card-row"},r.a.createElement(gt,{className:"pool-card-cell"},r.a.createElement(p.a,{trigger:"hover",content:r.a.createElement("div",{style:{width:300}},"A portion of each trade (",100*ie.a,"%) goes to liquidity providers as a protocol incentive.")},"Liquidity Provider Fee ",r.a.createElement(vt.a,null))),r.a.createElement("div",{className:"pool-card-cell ",title:j.toString()},j," ",n.name))):null},Et=function(e){var t,n={width:120},a=[{key:"trade",tab:r.a.createElement("div",{style:n},"Trade"),render:function(){return r.a.createElement(kt,null)}},{key:"pool",tab:r.a.createElement("div",{style:n},"Pool"),render:function(){return r.a.createElement(Ve,null)}}],o=Object(s.f)(),i=Object(s.e)(),c=o.pathname.indexOf("add")<0?"trade":"pool";return r.a.createElement(r.a.Fragment,null,r.a.createElement(C,{right:r.a.createElement(p.a,{placement:"topRight",title:"Settings",content:r.a.createElement(z,null),trigger:"click"},r.a.createElement(m.a,{shape:"circle",size:"large",type:"text",icon:r.a.createElement(U.a,null)}))}),r.a.createElement(v.a,{className:"exchange-card",headStyle:{padding:0},bodyStyle:{position:"relative"},tabList:a,tabProps:{tabBarGutter:0},activeTabKey:c,onTabChange:function(e){!function(e){c!==e&&("trade"===e?i.push("/"):i.push("/add"))}(e)}},null===(t=a.find((function(e){return e.key===c})))||void 0===t?void 0:t.render()))};function Ot(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(u.a,{basename:"/"},r.a.createElement(q.a,null,r.a.createElement(k.a,null,r.a.createElement(S.a,null,r.a.createElement(le,null,r.a.createElement(Ke,null,r.a.createElement(s.a,{exact:!0,path:"/",component:Et}),r.a.createElement(s.a,{exact:!0,path:"/add",component:Et}),r.a.createElement(s.a,{exact:!0,path:"/info",component:function(){return r.a.createElement(ft,null)}}),r.a.createElement(s.a,{exact:!0,path:"/pool",component:function(){return r.a.createElement(bt,null)}}))))))))}var jt=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(Ot,null),r.a.createElement("div",{className:"social-buttons"},r.a.createElement(c.a,{href:"https://github.com/project-serum/oyster-swap","data-color-scheme":"no-preference: light; light: light; dark: light;","data-icon":"octicon-star","data-size":"large","data-show-count":!0,"aria-label":"Star solana-labs/oyster-swap on GitHub"},"Star"),r.a.createElement(c.a,{href:"https://github.com/project-serum/oyster-swap/fork","data-color-scheme":"no-preference: light; light: light; dark: light;","data-size":"large","aria-label":"Fork project-serum/oyster-swap on GitHub"},"Fork")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(jt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},132:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(0),r=n.n(a),o=n(1120),i=n(16),c=function(e){var t,n,a=e.type,c=e.code,u="string"===typeof e.address?e.address:null===(t=e.address)||void 0===t?void 0:t.toBase58();if(!u)return null;var s=null!==(n=e.length)&&void 0!==n?n:9;return r.a.createElement("a",{href:"https://explorer.solana.com/".concat(a,"/").concat(u),target:"_blank",title:u,style:e.style},c?r.a.createElement(o.a.Text,{style:e.style,code:!0},Object(i.n)(u,s)):Object(i.n)(u,s))}},16:function(e,t,n){"use strict";n.d(t,"o",(function(){return i})),n.d(t,"n",(function(){return c})),n.d(t,"l",(function(){return u})),n.d(t,"k",(function(){return s})),n.d(t,"j",(function(){return l})),n.d(t,"m",(function(){return d})),n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return m})),n.d(t,"d",(function(){return f})),n.d(t,"i",(function(){return b})),n.d(t,"e",(function(){return y})),n.d(t,"f",(function(){return v})),n.d(t,"g",(function(){return g})),n.d(t,"h",(function(){return h})),n.d(t,"c",(function(){return k}));var a=n(37),r=n(22),o=n(0);function i(e,t){var n=Object(o.useState)((function(){var n=localStorage.getItem(e);return n?JSON.parse(n):t})),a=Object(r.a)(n,2),i=a[0],c=a[1],u=Object(o.useCallback)((function(t){i!==t&&(c(t),null===t?localStorage.removeItem(e):localStorage.setItem(e,JSON.stringify(t)))}),[i,e]);return[i,u]}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return"".concat(e.slice(0,t),"...").concat(e.slice(-t))}function u(e,t){var n,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,o=null===(n=e.get(t))||void 0===n?void 0:n.symbol;return o||(a?"".concat(t.substring(0,r),"..."):t)}function s(e,t){var n;return null===(n=e.get(t))||void 0===n?void 0:n.logoURI}function l(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=t.pubkeys.holdingMints.map((function(e){return e.toBase58()})).sort();return a.map((function(t){return u(e,t,n)})).join("/")}function d(e,t){return!!e.get(t)}var p=new Set(["USDC","wUSDC","USDT"]);function m(e,t){return Array.apply(0,new Array(Math.ceil(e.length/t))).map((function(n,a){return e.slice(a*t,(a+1)*t)}))}function f(e,t){var n,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(!e)return 0;var r="number"===typeof e?e:null===(n=e.info.amount)||void 0===n?void 0:n.toNumber(),o=Math.pow(10,(null===t||void 0===t?void 0:t.decimals)||0),i=r/o*a;return i}var b=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),y=new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}),v=new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2}),g=new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:8}),h=new Intl.DateTimeFormat("en-US",{day:"numeric",month:"short"}),k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,3,5,100],n=1,r=["#27ae60","inherit","#f3841e","#ff3945"];if(e>t[t.length-1])return r[n];var o=Object(a.a)(t).sort((function(t,n){var a=t-e<0?Number.POSITIVE_INFINITY:t-e,r=n-e<0?Number.POSITIVE_INFINITY:n-e;return a<r?-1:a>r?1:0}))[0],i=t.indexOf(o);return-1!==i?r[i]:r[n]}},19:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return M})),n.d(t,"c",(function(){return F})),n.d(t,"d",(function(){return q})),n.d(t,"a",(function(){return D})),n.d(t,"i",(function(){return _})),n.d(t,"e",(function(){return R})),n.d(t,"h",(function(){return U})),n.d(t,"j",(function(){return V})),n.d(t,"g",(function(){return G})),n.d(t,"f",(function(){return Y}));var a=n(312),r=n(37),o=n(22),i=n(202),c=n(30),u=n(11),s=n.n(u),l=n(15),d=n(0),p=n.n(d),m=n(32),f=n(77),b=n(21),y=n(34),v=n(45),g=n(39),h=n(48),k=n(16),w=n(302),E=p.a.createContext(null),O=new w.a,j=new Map,A=new Map,x=new Map,S=new Map,N=new Map,B=new Map,T=function(){var e=Object(l.a)(s.a.mark((function e(t,n){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getAccountInfo(n);case 2:if(null!==(a=e.sent)){e.next=5;break}throw new Error("Failed to find account");case 5:return e.abrupt("return",P(n,a));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),I=function(){var t=Object(l.a)(s.a.mark((function t(n,a){var r,o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.getAccountInfo(a);case 2:if(null!==(r=t.sent)){t.next=5;break}throw new Error("Failed to find mint account");case 5:return o=e.from(r.data),t.abrupt("return",J(o));case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),M=function(t,n){var a=e.from(n.data),r=J(a);return{pubkey:t,account:Object(c.a)({},n),info:r}},C=new Map,F={query:function(){var e=Object(l.a)(s.a.mark((function e(t,n,a){var r,o,i,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r="string"===typeof n?new b.d(n):n,o=r.toBase58(),!(i=B.get(o))){e.next=5;break}return e.abrupt("return",i);case 5:if(!(c=N.get(o))){e.next=8;break}return e.abrupt("return",c);case 8:return c=t.getAccountInfo(r).then((function(e){if(!e)throw new Error("Account not found");return F.add(r,e,a)})),N.set(o,c),e.abrupt("return",c);case 11:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),add:function(e,t,n){var a=e.toBase58(),r=n||C.get(a);if(!r)throw new Error("Deserializer needs to be registered or passed as a parameter");F.registerParser(e,r),N.delete(a);var o=r(e,t);return B.set(a,o),o},get:function(e){var t;return t="string"!==typeof e?e.toBase58():e,B.get(t)},registerParser:function(e,t){C.set(e.toBase58(),t)},queryAccount:function(){var e=Object(l.a)(s.a.mark((function e(t,n){var a,r,o,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a="string"===typeof n?new b.d(n):n,r=a.toBase58(),!(o=S.get(r))){e.next=5;break}return e.abrupt("return",o);case 5:if(!(i=x.get(r))){e.next=8;break}return e.abrupt("return",i);case 8:return i=T(t,a).then((function(e){return x.delete(r),S.set(r,e),e})),x.set(r,i),e.abrupt("return",i);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),addAccount:function(e,t){var n=P(e,t);return S.set(n.pubkey.toBase58(),n),n},deleteAccount:function(e){var t=null===e||void 0===e?void 0:e.toBase58();S.delete(t),O.raiseAccountUpdated(t)},getAccount:function(e){var t;return t="string"!==typeof e?e.toBase58():e,S.get(t)},queryMint:function(){var e=Object(l.a)(s.a.mark((function e(t,n){var a,r,o,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a="string"===typeof n?new b.d(n):n,r=a.toBase58(),!(o=A.get(r))){e.next=5;break}return e.abrupt("return",o);case 5:if(!(i=j.get(r))){e.next=8;break}return e.abrupt("return",i);case 8:return i=I(t,a).then((function(e){return x.delete(r),A.set(r,e),e})),x.set(r,i),e.abrupt("return",i);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getMint:function(e){var t;return t="string"!==typeof e?e.toBase58():e,A.get(t)},addMint:function(e,t){var n=J(t.data),a=e.toBase58();return A.set(a,n),n}},q=function(e){var t,n=Object(i.a)(S.values());try{for(n.s();!(t=n.n()).done;){var a=t.value;if(e(a))return a}}catch(r){n.e(r)}finally{n.f()}};function P(t,n){var a=e.from(n.data),r=H(a);return{pubkey:t,account:Object(c.a)({},n),info:r}}function W(e,t){if(t)return{pubkey:e,account:t,info:{mint:y.d,owner:e,amount:new v.d(t.lamports),delegate:null,delegatedAmount:new v.d(0),isInitialized:!0,isFrozen:!1,isNative:!0,rentExemptReserve:null,closeAuthority:null}}}var L=new Set,K=function(){var e=Object(l.a)(s.a.mark((function e(t,n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return L.add(n.toBase58()),e.next=5,t.getTokenAccountsByOwner(n,{programId:Object(y.e)().token});case 5:e.sent.value.map((function(e){var t=H(e.account.data);return{pubkey:e.pubkey,account:Object(c.a)({},e.account),info:t}})).forEach((function(e){S.set(e.pubkey.toBase58(),e)}));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function D(t){var n=t.children,a=void 0===n?null:n,i=Object(m.d)(),u=Object(f.b)(),s=u.wallet,l=u.connected,h=Object(d.useState)([]),k=Object(o.a)(h,2),w=k[0],j=k[1],x=Object(d.useState)([]),N=Object(o.a)(x,2),T=N[0],I=N[1],M=function(){var e=Object(m.d)(),t=Object(f.b)().wallet,n=Object(d.useState)(),a=Object(o.a)(n,2),r=a[0],i=a[1];return Object(d.useEffect)((function(){e&&(null===t||void 0===t?void 0:t.publicKey)&&(e.getAccountInfo(t.publicKey).then((function(e){e&&i(e)})),e.onAccountChange(t.publicKey,(function(e){e&&i(e)})))}),[i,t,null===t||void 0===t?void 0:t.publicKey,e]),Object(d.useEffect)((function(){if(null===t||void 0===t?void 0:t.publicKey){var e=W(null===t||void 0===t?void 0:t.publicKey,r);e&&S.set(e.pubkey.toBase58(),e)}}),[null===t||void 0===t?void 0:t.publicKey,r]),{nativeAccount:r}}().nativeAccount,C=Object(g.k)().pools,q=null===s||void 0===s?void 0:s.publicKey,P=Object(d.useCallback)((function(){return Object(r.a)(S.values()).filter((function(e){return e.info.owner.toBase58()===(null===q||void 0===q?void 0:q.toBase58())}))}),[q]);return Object(d.useEffect)((function(){I([W(q,M)].concat(Object(r.a)(w)).filter((function(e){return void 0!==e})))}),[M,q,w]),Object(d.useEffect)((function(){if(i&&q){K(i,y.b),K(i,q).then((function(){j(P())}));var t=O.onAccount((function(){j(P())})),n=i.onProgramAccountChange(Object(y.e)().token,(function(t){var n=t.accountId;if(t.accountInfo.data.length===v.a.span){var a=H(t.accountInfo.data),r={pubkey:new b.d(t.accountId),account:Object(c.a)({},t.accountInfo),info:a};(L.has(r.info.owner.toBase58())||S.has(n))&&(S.set(n,r),O.raiseAccountUpdated(n))}else if(t.accountInfo.data.length===v.b.span){if(A.has(n)){var o=e.from(t.accountInfo.data),i=J(o);A.set(n,i)}O.raiseAccountUpdated(n)}B.has(n)&&F.add(new b.d(n),t.accountInfo)}),"singleGossip");return function(){i.removeProgramAccountChangeListener(n),t()}}j([])}),[i,l,q,P]),p.a.createElement(E.Provider,{value:{userAccounts:T,pools:C,nativeAccount:M}},a)}function _(){return{account:Object(d.useContext)(E).nativeAccount}}var R=function(){var t=Object(l.a)(s.a.mark((function t(n,r,o){var i,u;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(Object(k.b)(r,99).map((function(e){return z(n,e,o)})));case 2:return i=t.sent,u=i.map((function(t){return t.array.filter((function(e){return!!e})).map((function(t){var n=t.data,r=Object(a.a)(t,["data"]);return Object(c.a)(Object(c.a)({},r),{},{data:e.from(n[0],"base64")})}))})).flat(),t.abrupt("return",{keys:r,array:u});case 5:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}(),z=function(){var e=Object(l.a)(s.a.mark((function e(t,n,a){var r,o,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t._buildArgs([n],a,"base64"),e.next=3,t._rpcRequest("getMultipleAccounts",r);case 3:if(!(o=e.sent).error){e.next=6;break}throw new Error("failed to get info about account "+o.error.message);case 6:if(!o.result.value){e.next=9;break}return i=o.result.value,e.abrupt("return",{keys:n,array:i});case 9:throw new Error;case 10:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}();function U(e){var t=Object(m.d)(),n=Object(d.useState)(),a=Object(o.a)(n,2),r=a[0],i=a[1],c="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58();return Object(d.useEffect)((function(){if(c){F.queryMint(t,c).then(i).catch((function(e){return Object(h.a)({message:e.message,type:"error"})}));var e=O.onAccount((function(e){e.id===c&&F.queryMint(t,c).then(i)}));return function(){e()}}}),[t,c]),r}function V(){return{userAccounts:Object(d.useContext)(E).userAccounts}}function G(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Object(d.useContext)(E),n=t.pools,a=Object(d.useMemo)((function(){return n.filter((function(t){return t.legacy===e}))}),[n,e]);return{pools:a}}var Y=function(e){var t=V().userAccounts,n=t.findIndex((function(t){return t.info.mint.toBase58()===e}));if(-1!==n)return t[n]},H=function(e){var t=v.a.decode(e);return t.mint=new b.d(t.mint),t.owner=new b.d(t.owner),t.amount=v.d.fromBuffer(t.amount),0===t.delegateOption?(t.delegate=null,t.delegatedAmount=new v.d(0)):(t.delegate=new b.d(t.delegate),t.delegatedAmount=v.d.fromBuffer(t.delegatedAmount)),t.isInitialized=0!==t.state,t.isFrozen=2===t.state,1===t.isNativeOption?(t.rentExemptReserve=v.d.fromBuffer(t.isNative),t.isNative=!0):(t.rentExemptReserve=null,t.isNative=!1),0===t.closeAuthorityOption?t.closeAuthority=null:t.closeAuthority=new b.d(t.closeAuthority),t},J=function(e){if(e.length!==v.b.span)throw new Error("Not a valid Mint");var t=v.b.decode(e);return 0===t.mintAuthorityOption?t.mintAuthority=null:t.mintAuthority=new b.d(t.mintAuthority),t.supply=v.d.fromBuffer(t.supply),t.isInitialized=0!==t.isInitialized,0===t.freezeAuthorityOption?t.freezeAuthority=null:t.freezeAuthority=new b.d(t.freezeAuthority),t}}).call(this,n(61).Buffer)},241:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}));var a,r=1e4;!function(e){e[e.ConstantProduct=0]="ConstantProduct",e[e.ConstantPrice=1]="ConstantPrice",e[e.Stable=2]="Stable",e[e.ConstantProductWithOffset=3]="ConstantProductWithOffset"}(a||(a={}))},302:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(66),r=n(55),o=n(111),i=function e(t){Object(r.a)(this,e),this.id=void 0,this.id=t};i.type="AccountUpdate";var c=function e(t){Object(r.a)(this,e),this.ids=void 0,this.ids=t};c.type="MarketUpdate";var u=function(){function e(){Object(r.a)(this,e),this.emitter=new o.EventEmitter}return Object(a.a)(e,[{key:"onMarket",value:function(e){var t=this;return this.emitter.on(c.type,e),function(){return t.emitter.removeListener(c.type,e)}}},{key:"onAccount",value:function(e){var t=this;return this.emitter.on(i.type,e),function(){return t.emitter.removeListener(i.type,e)}}},{key:"raiseAccountUpdated",value:function(e){this.emitter.emit(i.type,new i(e))}},{key:"raiseMarketUpdated",value:function(e){this.emitter.emit(c.type,new c(e))}}]),e}()},32:function(e,t,n){"use strict";n.d(t,"b",(function(){return y})),n.d(t,"a",(function(){return h})),n.d(t,"d",(function(){return k})),n.d(t,"e",(function(){return w})),n.d(t,"f",(function(){return E})),n.d(t,"c",(function(){return j}));var a=n(37),r=n(11),o=n.n(r),i=n(15),c=n(22),u=n(16),s=n(21),l=n(0),d=n.n(l),p=n(34),m=n(48),f=n(132),b=n(215),y=[{name:"mainnet-beta",endpoint:"https://solana-api.projectserum.com/",chainID:b.a.MainnetBeta},{name:"testnet",endpoint:Object(s.h)("testnet"),chainID:b.a.Testnet},{name:"devnet",endpoint:Object(s.h)("devnet"),chainID:b.a.Devnet},{name:"localnet",endpoint:"http://127.0.0.1:8899",chainID:b.a.Devnet}],v=y[0].endpoint,g=d.a.createContext({endpoint:v,setEndpoint:function(){},slippage:.25,setSlippage:function(e){},connection:new s.b(v,"recent"),sendConnection:new s.b(v,"recent"),env:y[0].name,tokens:[],tokenMap:new Map});function h(e){var t=e.children,n=void 0===t?void 0:t,a=Object(u.o)("connectionEndpts",y[0].endpoint),r=Object(c.a)(a,2),o=r[0],i=r[1],m=Object(u.o)("slippage",.25.toString()),f=Object(c.a)(m,2),v=f[0],h=f[1],k=Object(l.useMemo)((function(){return new s.b(o,"recent")}),[o]),w=Object(l.useMemo)((function(){return new s.b(o,"recent")}),[o]),E=y.find((function(e){return e.endpoint===o}))||y[0],O=E.name,j=Object(l.useState)([]),A=Object(c.a)(j,2),x=A[0],S=A[1],N=Object(l.useState)(new Map),B=Object(c.a)(N,2),T=B[0],I=B[1];return Object(l.useEffect)((function(){(new b.b).resolve().then((function(e){var t=e.filterByChainId(E.chainID).excludeByTag("nft").getList(),n=t.reduce((function(e,t){return e.set(t.address,t),e}),new Map);I(n),S(t)}))}),[E]),Object(p.f)(O),Object(l.useEffect)((function(){var e=k.onAccountChange((new s.a).publicKey,(function(){}));return function(){k.removeAccountChangeListener(e)}}),[k]),Object(l.useEffect)((function(){var e=k.onSlotChange((function(){return null}));return function(){k.removeSlotChangeListener(e)}}),[k]),Object(l.useEffect)((function(){var e=w.onAccountChange((new s.a).publicKey,(function(){}));return function(){w.removeAccountChangeListener(e)}}),[w]),Object(l.useEffect)((function(){var e=w.onSlotChange((function(){return null}));return function(){w.removeSlotChangeListener(e)}}),[w]),d.a.createElement(g.Provider,{value:{endpoint:o,setEndpoint:i,slippage:parseFloat(v),setSlippage:function(e){return h(e.toString())},connection:k,sendConnection:w,tokens:x,tokenMap:T,env:O}},n)}function k(){return Object(l.useContext)(g).connection}function w(){var e=Object(l.useContext)(g);return{endpoint:e.endpoint,setEndpoint:e.setEndpoint,env:e.env,tokens:e.tokens,tokenMap:e.tokenMap}}function E(){var e=Object(l.useContext)(g);return{slippage:e.slippage,setSlippage:e.setSlippage}}var O=function(){var e=Object(i.a)(o.a.mark((function e(t,n){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.confirmTransaction(n,"max");case 2:return e.next=4,t.getParsedConfirmedTransaction(n);case 4:return a=e.sent,r=[],(null===a||void 0===a?void 0:a.meta)&&a.meta.logMessages&&a.meta.logMessages.forEach((function(e){for(var t,n=/Error: (.*)/gm;null!==(t=n.exec(e));)t.index===n.lastIndex&&n.lastIndex++,t.length>1&&r.push(t[1])})),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),j=function(){var e=Object(i.a)(o.a.mark((function e(t,n,r,i){var c,u,l,p,b,y,v,g,h,k=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=!(k.length>4&&void 0!==k[4])||k[4],l=new s.f,r.forEach((function(e){return l.add(e)})),e.next=5,t.getRecentBlockhash("max");case 5:return l.recentBlockhash=e.sent.blockhash,(c=l).setSigners.apply(c,[n.publicKey].concat(Object(a.a)(i.map((function(e){return e.publicKey}))))),i.length>0&&(p=l).partialSign.apply(p,Object(a.a)(i)),e.next=10,n.signTransaction(l);case 10:return l=e.sent,b=l.serialize(),y={skipPreflight:!0,commitment:"singleGossip"},e.next=15,t.sendRawTransaction(b,y);case 15:if(v=e.sent,!u){e.next=26;break}return e.next=19,t.confirmTransaction(v,y&&y.commitment);case 19:if(!(null===(g=e.sent.value)||void 0===g?void 0:g.err)){e.next=26;break}return e.next=23,O(t,v);case 23:throw h=e.sent,Object(m.a)({message:"Transaction failed...",description:d.a.createElement(d.a.Fragment,null,h.map((function(e){return d.a.createElement("div",null,e)})),d.a.createElement(f.a,{address:v,type:"transaction"})),type:"error"}),new Error("Raw transaction ".concat(v," failed (").concat(JSON.stringify(g),")"));case 26:return e.abrupt("return",v);case 27:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}()},34:function(e,t,n){"use strict";n.d(t,"d",(function(){return u})),n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return p})),n.d(t,"f",(function(){return f})),n.d(t,"e",(function(){return b}));var a,r,o,i=n(21),c=n(42),u=new i.d("So11111111111111111111111111111111111111112"),s=new i.d("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),l=new i.d("HfoTxFR1Tm6kGmWgYWD6J7YHVy1UwqSULUGVLXkJqaKN"),d=new i.d("".concat("AkfvvPUuVqxgE4yehaBv3TUrhhYTyVvbqtEvAMwTPpWJ")),p=!1;console.debug("Host address: ".concat(null===d||void 0===d?void 0:d.toBase58())),console.debug("Owner address: ".concat(null===l||void 0===l?void 0:l.toBase58()));var m=[{name:"mainnet-beta",swap:function(){return{current:{pubkey:new i.d("SwaPpA9LAaLfeLi3a68M4DjnLqgtticKg6CnyNwgAC8"),layout:c.TokenSwapLayout},legacy:[new i.d("9qvG1zUp8xF1Bi4m6UdRNby1BAAuaDrUxSpv4CmRRMjL")]}}},{name:"testnet",swap:function(){return{current:{pubkey:new i.d("SwaPpA9LAaLfeLi3a68M4DjnLqgtticKg6CnyNwgAC8"),layout:c.TokenSwapLayout},legacy:[]}}},{name:"devnet",swap:function(){return{current:{pubkey:new i.d("SwaPpA9LAaLfeLi3a68M4DjnLqgtticKg6CnyNwgAC8"),layout:c.TokenSwapLayout},legacy:[new i.d("BSfTAcBdqmvX5iE2PW88WFNNp2DHhLUaBKk5WrnxVkcJ")]}}},{name:"localnet",swap:function(){return{current:{pubkey:new i.d("369YmCWHGxznT7GGBhcLZDRcRoGWmGKFWdmtiPy78yj7"),layout:c.TokenSwapLayoutV1},legacy:[]}}}],f=function(e){var t=m.find((function(t){return t.name===e}));if(t){var n=t.swap();a=n.current.pubkey,o=n.current.layout,r=n.legacy}},b=function(){return{token:s,swap:a,swapLayout:o,swap_legacy:r}}},379:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return b}));var a=n(11),r=n.n(a),o=n(15),i=n(21);function c(e,t,n,a){return u.apply(this,arguments)}function u(){return(u=Object(o.a)(r.a.mark((function e(t,n,a,o){var i,c,u,s,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=0,c=0,!(o.length>255)){e.next=15;break}case 3:if(!(o.length-c>255)){e.next=15;break}return u=o.slice(c,c+255),c+=255,console.log("send",(2|i).toString(16),u.length.toString(16),u),e.next=9,t.send(224,n,a,2|i,u);case 9:if(2===e.sent.length){e.next=12;break}throw new Error("Received unexpected reply payload");case 12:i|=1,e.next=3;break;case 15:return s=o.slice(c),console.log("send",i.toString(16),s.length.toString(16),s),e.next=19,t.send(224,n,a,i,s);case 19:return l=e.sent,e.abrupt("return",l.slice(0,l.length-2));case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return(e|1<<31>>>0)>>>0}function l(t,n){var a;a=void 0!==t?void 0!==n?4:3:2;var r=e.alloc(1+4*a),o=0;return o=r.writeUInt8(a,o),o=r.writeUInt32BE(s(44),o),o=r.writeUInt32BE(s(501),o),a>2&&(o=r.writeUInt32BE(s(t),o),4===a&&(o=r.writeUInt32BE(s(n),o))),r}function d(e,t){return p.apply(this,arguments)}function p(){return(p=Object(o.a)(r.a.mark((function e(t,n){var a,o,i=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.length>2&&void 0!==i[2]?i[2]:l(),o=n.serializeMessage(),e.abrupt("return",m(t,o,a));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e,t){return f.apply(this,arguments)}function f(){return(f=Object(o.a)(r.a.mark((function t(n,a){var o,i,u,s=arguments;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=s.length>2&&void 0!==s[2]?s[2]:l(),(i=e.alloc(1)).writeUInt8(1,0),u=e.concat([i,o,a]),t.abrupt("return",c(n,6,1,u));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function b(e){return y.apply(this,arguments)}function y(){return(y=Object(o.a)(r.a.mark((function e(t){var n,a,o=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:l(),e.next=3,c(t,5,0,n);case 3:return a=e.sent,e.abrupt("return",new i.d(a));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}).call(this,n(61).Buffer)},39:function(e,t,n){"use strict";n.d(t,"a",(function(){return v})),n.d(t,"c",(function(){return g})),n.d(t,"g",(function(){return k})),n.d(t,"f",(function(){return w})),n.d(t,"h",(function(){return E})),n.d(t,"d",(function(){return O})),n.d(t,"k",(function(){return x})),n.d(t,"j",(function(){return S})),n.d(t,"i",(function(){return N})),n.d(t,"b",(function(){return a})),n.d(t,"e",(function(){return W}));var a,r=n(37),o=n(22),i=n(11),c=n.n(i),u=n(15),s=n(21),l=n(32),d=n(0),p=n(45),m=n(48),f=n(19),b=n(34),y=n(42),v=.003,g=5e-4,h=function(e){return e.data.length===y.TokenSwapLayout.span},k=function(){var e=Object(u.a)(c.a.mark((function e(t,n,a,r,o){var i,u,s,d,v,g,k,w,E,O,j,A,x,S,N;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o){e.next=2;break}throw new Error("Pool is required");case 2:return Object(m.a)({message:"Removing Liquidity...",description:"Please review transactions to approve.",type:"warn"}),i=0,u=0,e.next=7,f.c.queryMint(t,o.pubkeys.mint);case 7:return s=e.sent,e.next=10,f.c.queryAccount(t,o.pubkeys.holdingAccounts[0]);case 10:return d=e.sent,e.next=13,f.c.queryAccount(t,o.pubkeys.holdingAccounts[1]);case 13:if(v=e.sent,s.mintAuthority){e.next=16;break}throw new Error("Mint doesnt have authority");case 16:return g=s.mintAuthority,k=[],w=[],E=[],e.next=22,t.getMinimumBalanceForRentExemption(p.a.span);case 22:return O=e.sent,e.next=25,F(n.publicKey,n.publicKey,w,E,O,d.info.mint,k);case 25:return e.t0=e.sent,e.next=28,F(n.publicKey,n.publicKey,w,E,O,v.info.mint,k);case 28:return e.t1=e.sent,j=[e.t0,e.t1],A=h(o.raw.account),x=_(w,E,r.pubkey,n.publicKey,a,A?void 0:g),A&&k.push(x),w.push(Object(y.withdrawInstruction)(o.pubkeys.account,g,x.publicKey,o.pubkeys.mint,o.pubkeys.feeAccount,r.pubkey,o.pubkeys.holdingAccounts[0],o.pubkeys.holdingAccounts[1],j[0],j[1],o.pubkeys.program,Object(b.e)().token,a,i,u,A)),(S=a===r.info.amount.toNumber())&&w.push(p.c.createCloseAccountInstruction(Object(b.e)().token,r.pubkey,g,n.publicKey,[])),e.next=38,Object(l.c)(t,n,w.concat(E),k);case 38:return N=e.sent,S&&f.c.deleteAccount(r.pubkey),Object(m.a)({message:"Liquidity Returned. Thank you for your support.",type:"success",description:"Transaction - ".concat(N)}),e.abrupt("return",[d.info.mint.equals(b.d)?n.publicKey:j[0],v.info.mint.equals(b.d)?n.publicKey:j[1]]);case 42:case"end":return e.stop()}}),e)})));return function(t,n,a,r,o){return e.apply(this,arguments)}}(),w=function(){var e=Object(u.a)(c.a.mark((function e(t,n,a,r,o,i,u){var s,d,v,g,k,w,E,O,j,A,x,S,N,T;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u){e.next=2;break}throw new Error("Pool is required");case 2:return Object(m.a)({message:"Removing Liquidity...",description:"Please review transactions to approve.",type:"warn"}),s=r*(1+B),e.next=6,f.c.queryMint(t,u.pubkeys.mint);case 6:return d=e.sent,e.next=9,f.c.queryAccount(t,u.pubkeys.holdingAccounts[0]);case 9:return v=e.sent,e.next=12,f.c.queryAccount(t,u.pubkeys.holdingAccounts[1]);case 12:if(g=e.sent,d.mintAuthority){e.next=15;break}throw new Error("Mint doesnt have authority");case 15:return k=i===u.pubkeys.holdingMints[0].toBase58()?v:g,w=d.mintAuthority,E=[],O=[],j=[],e.next=22,t.getMinimumBalanceForRentExemption(p.a.span);case 22:return A=e.sent,e.next=25,F(n.publicKey,n.publicKey,O,j,A,k.info.mint,E);case 25:return x=e.sent,S=h(u.raw.account),N=_(O,j,a.pubkey,n.publicKey,a.info.amount.toNumber(),S?void 0:w),S&&E.push(N),O.push(Object(y.withdrawExactOneInstruction)(u.pubkeys.account,w,N.publicKey,u.pubkeys.mint,a.pubkey,u.pubkeys.holdingAccounts[0],u.pubkeys.holdingAccounts[1],x,u.pubkeys.feeAccount,u.pubkeys.program,Object(b.e)().token,o,s,S)),e.next=32,Object(l.c)(t,n,O.concat(j),E);case 32:return T=e.sent,Object(m.a)({message:"Liquidity Returned. Thank you for your support.",type:"success",description:"Transaction - ".concat(T)}),e.abrupt("return",k.info.mint.equals(b.d)?n.publicKey:x);case 35:case"end":return e.stop()}}),e)})));return function(t,n,a,r,o,i,c){return e.apply(this,arguments)}}(),E=function(){var e=Object(u.a)(c.a.mark((function e(t,n,a,r,o){var i,u,d,v,g,k,w,E,O,j,A,x,S,N,B,T,I;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o&&a[0].account){e.next=3;break}return Object(m.a)({type:"error",message:"Pool doesn't exsist.",description:"Swap trade cancelled"}),e.abrupt("return");case 3:return u=a[0].amount,d=a[1].amount*(1-r),v=(null===(i=o.pubkeys.holdingMints[0])||void 0===i?void 0:i.toBase58())===a[0].account.info.mint.toBase58()?o.pubkeys.holdingAccounts[0]:o.pubkeys.holdingAccounts[1],g=v===o.pubkeys.holdingAccounts[0]?o.pubkeys.holdingAccounts[1]:o.pubkeys.holdingAccounts[0],e.next=9,f.c.queryMint(t,o.pubkeys.mint);case 9:if((k=e.sent).mintAuthority&&o.pubkeys.feeAccount){e.next=12;break}throw new Error("Mint doesnt have authority");case 12:return w=k.mintAuthority,E=[],O=[],j=[],e.next=18,t.getMinimumBalanceForRentExemption(p.a.span);case 18:return A=e.sent,x=R(E,O,a[0].account,n.publicKey,u+A,j),S=F(n.publicKey,n.publicKey,E,O,A,new s.d(a[1].mintAddress),j),N=h(o.raw.account),B=_(E,O,x,n.publicKey,u,N?void 0:w),N&&j.push(B),T=b.b?F(n.publicKey,b.b,E,O,A,o.pubkeys.mint,j):void 0,E.push(Object(y.swapInstruction)(o.pubkeys.account,w,B.publicKey,x,v,g,S,o.pubkeys.mint,o.pubkeys.feeAccount,o.pubkeys.program,Object(b.e)().token,u,d,T,N)),e.next=28,Object(l.c)(t,n,E.concat(O),j);case 28:I=e.sent,Object(m.a)({message:"Trade executed.",type:"success",description:"Transaction - ".concat(I)});case 30:case"end":return e.stop()}}),e)})));return function(t,n,a,r,o){return e.apply(this,arguments)}}(),O=function(){var e=Object(u.a)(c.a.mark((function e(t,n,a,r,o,i){var u=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("one"!==(u.length>6&&void 0!==u[6]?u[6]:"both")||!o){e.next=6;break}return e.next=4,M(o,a[0],t,n);case 4:e.next=15;break;case 6:if(o){e.next=13;break}if(i){e.next=9;break}throw new Error("Options are required to create new pool.");case 9:return e.next=11,K(n,t,a,i);case 11:e.next=15;break;case 13:return e.next=15,T(o,a,t,n);case 15:case"end":return e.stop()}}),e)})));return function(t,n,a,r,o,i){return e.apply(this,arguments)}}(),j=function(e,t){return t.map((function(t){return f.c.queryAccount(e,new s.d(t))}))},A=function(e,t){var n=new s.d(e.data.tokenPool);return{pubkeys:{account:e.pubkey,program:t,mint:n,holdingMints:[],holdingAccounts:[e.data.tokenAccountA,e.data.tokenAccountB].map((function(e){return new s.d(e)}))},legacy:!1,raw:e}},x=function(){var e=Object(l.d)(),t=Object(d.useState)([]),n=Object(o.a)(t,2),a=n[0],i=n[1];return Object(d.useEffect)((function(){i([]);var t=function(){var t=Object(u.a)(c.a.mark((function t(n){var a,o,i,l=arguments;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=l.length>1&&void 0!==l[1]&&l[1],o=[],t.next=4,e.getProgramAccounts(n);case 4:return t.sent.filter((function(e){return e.account.data.length===y.TokenSwapLayout.span||e.account.data.length===y.TokenSwapLayoutV1.span||e.account.data.length===y.TokenSwapLayoutLegacyV0.span})).map((function(t){var r={data:void 0,account:t.account,pubkey:t.pubkey,init:function(){var e=Object(u.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},i=t.account.data.length===y.TokenSwapLayout.span?y.TokenSwapLayout:t.account.data.length===y.TokenSwapLayoutV1.span?y.TokenSwapLayoutV1:y.TokenSwapLayoutLegacyV0;if(i===y.TokenSwapLayoutLegacyV0){r.data=i.decode(t.account.data);var l=A(r,n);l.legacy=a,o.push(l),r.init=Object(u.a)(c.a.mark((function t(){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Promise.all(j(e,[r.data.tokenAccountA,r.data.tokenAccountB]));case 3:n=t.sent,l.pubkeys.holdingMints=[n[0].info.mint,n[1].info.mint],t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))}else{r.data=i.decode(t.account.data);var d=A(r,n);d.legacy=a,d.pubkeys.feeAccount=new s.d(r.data.feeAccount),d.pubkeys.holdingMints=[new s.d(r.data.mintA),new s.d(r.data.mintB)],o.push(d)}return r})),i=o.map((function(e){var t;return[].concat(Object(r.a)(e.pubkeys.holdingAccounts.map((function(e){return e.toBase58()}))),Object(r.a)(e.pubkeys.holdingMints.map((function(e){return e.toBase58()}))),[null===(t=e.pubkeys.feeAccount)||void 0===t?void 0:t.toBase58(),e.pubkeys.mint.toBase58()]).filter((function(e){return e}))})).flat(),t.next=8,Object(f.e)(e,i,"single").then((function(e){var t=e.keys;return e.array.map((function(e,n){var a=new s.d(t[n]);return e.data.length===p.a.span?f.c.addAccount(a,e):e.data.length!==p.b.span||f.c.getMint(a)?e:f.c.addMint(a,e)}))}));case 8:return t.abrupt("return",o);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();Promise.all([t(Object(b.e)().swap)].concat(Object(r.a)(Object(b.e)().swap_legacy.map((function(e){return t(e,!0)}))))).then((function(e){i(e.flat())}))}),[e]),Object(d.useEffect)((function(){var t=e.onProgramAccountChange(Object(b.e)().swap,function(){var e=Object(u.a)(c.a.mark((function e(t){var n,o,u,l,d,p;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.accountId,t.accountInfo.data.length===Object(b.e)().swapLayout.span&&(o=t.accountInfo,u={data:Object(b.e)().swapLayout.decode(o.data),account:o,pubkey:new s.d(n)},(l=a&&a.findIndex((function(e){return e.pubkeys.account.toBase58()===n})))&&l>=0&&a?(d=a.filter((function(e,t){return t!==l})),i([].concat(Object(r.a)(d),[A(u,Object(b.e)().swap)]))):((p=A(u,Object(b.e)().swap)).pubkeys.feeAccount=new s.d(u.data.feeAccount),p.pubkeys.holdingMints=[new s.d(u.data.mintA),new s.d(u.data.mintB)],i([].concat(Object(r.a)(a),[p]))));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),"singleGossip");return function(){e.removeProgramAccountChangeListener(t)}}),[e,a]),{pools:a}},S=function(e){var t=Object(l.d)(),n=Object(f.g)().pools,a=Object(d.useState)(),i=Object(o.a)(a,2),s=i[0],p=i[1],m=Object(d.useMemo)((function(){return Object(r.a)(e).sort()}),Object(r.a)(e));return Object(d.useEffect)((function(){Object(u.a)(c.a.mark((function e(){var a,r,i,u,s,l,d,b,y,v,g;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p(void 0),a=n.filter((function(e){return!e.legacy})).filter((function(e){return e.pubkeys.holdingMints.map((function(e){return e.toBase58()})).sort().every((function(e,t){return e===m[t]}))})),r={},i=0;case 4:if(!(i<a.length)){e.next=17;break}return u=a[i],e.next=8,Promise.all([f.c.queryAccount(t,u.pubkeys.holdingAccounts[0]),f.c.queryAccount(t,u.pubkeys.holdingAccounts[1])]);case 8:s=e.sent,l=Object(o.a)(s,2),d=l[0],b=l[1],(y=(d.info.amount.toNumber()||0)+(b.info.amount.toNumber()||0))>0&&(r[i.toString()]=y);case 14:i++,e.next=4;break;case 17:if(!(Object.keys(r).length>0)){e.next=22;break}return v=Object.entries(r).sort((function(e,t){var n=Object(o.a)(e,2),a=(n[0],n[1]),r=Object(o.a)(t,2);r[0];return a>r[1]?-1:1})),g=a[parseInt(v[0][0])],p(g),e.abrupt("return");case 22:case"end":return e.stop()}}),e)})))()}),[t,m,n]),s},N=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Object(f.g)(e),n=t.pools,a=Object(f.j)(),o=a.userAccounts,i=Object(d.useMemo)((function(){var t=o.reduce((function(e,t){var n=t.info.mint.toBase58();return e.set(n,[].concat(Object(r.a)(e.get(n)||[]),[t])),e}),new Map);return n.filter((function(n){return t.has(n.pubkeys.mint.toBase58())&&n.legacy===e})).map((function(e){var n,a,r=null===(n=e.pubkeys.feeAccount)||void 0===n?void 0:n.toBase58();return null===(a=t.get(e.pubkeys.mint.toBase58()))||void 0===a?void 0:a.map((function(t){return{account:t,isFeeAccount:r===t.pubkey.toBase58(),pool:e}}))})).flat()}),[n,o,e]);return i},B=.005;function T(e,t,n,a){return I.apply(this,arguments)}function I(){return(I=Object(u.a)(c.a.mark((function e(t,n,a,r){var o,i,u,s,d,v,g,k,w,E,O,j,A,x,S,N,T,I,M,C,q,P;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(m.a)({message:"Adding Liquidity...",description:"Please review transactions to approve.",type:"warn"}),e.next=3,f.c.queryMint(a,t.pubkeys.mint);case 3:if((o=e.sent).mintAuthority){e.next=6;break}throw new Error("Mint doesnt have authority");case 6:if(t.pubkeys.feeAccount){e.next=8;break}throw new Error("Invald fee account");case 8:return e.next=10,f.c.queryAccount(a,t.pubkeys.holdingAccounts[0]);case 10:return i=e.sent,e.next=13,f.c.queryAccount(a,t.pubkeys.holdingAccounts[1]);case 13:if(u=e.sent,s=i.info.amount.toNumber(),d=u.info.amount.toNumber(),v=i.info.mint.toBase58()===n[0].mintAddress?n[0]:n[1],g=v===n[0]?n[1]:n[0],v.account&&g.account){e.next=20;break}throw new Error("Missing account info.");case 20:return k=o.supply.toNumber(),w=o.mintAuthority,E=v.amount,O=g.amount,j=Math.min(E*(1-B)*k/s,O*(1-B)*k/d),A=[],x=[],S=[],e.next=30,a.getMinimumBalanceForRentExemption(p.a.span);case 30:return N=e.sent,T=R(A,x,v.account,r.publicKey,E+N,S),I=R(A,x,g.account,r.publicKey,O+N,S),M=F(r.publicKey,r.publicKey,A,[],N,t.pubkeys.mint,S,new Set([t.pubkeys.feeAccount.toBase58()])),C=h(t.raw.account),q=_(A,x,T,r.publicKey,E,C?void 0:w),C&&S.push(q),_(A,x,I,r.publicKey,O,C?q.publicKey:w),A.push(Object(y.depositInstruction)(t.pubkeys.account,w,q.publicKey,T,I,t.pubkeys.holdingAccounts[0],t.pubkeys.holdingAccounts[1],t.pubkeys.mint,M,t.pubkeys.program,Object(b.e)().token,j,E,O,C)),e.next=41,Object(l.c)(a,r,A.concat(x),S);case 41:P=e.sent,Object(m.a)({message:"Pool Funded. Happy trading.",type:"success",description:"Transaction - ".concat(P)});case 43:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e,t,n,a){return C.apply(this,arguments)}function C(){return(C=Object(u.a)(c.a.mark((function e(t,n,a,r){var o,i,u,s,d,v,g,k,w,E,O,j,A,x,S,N,T,I;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(m.a)({message:"Adding Liquidity...",description:"Please review transactions to approve.",type:"warn"}),e.next=3,f.c.queryMint(a,t.pubkeys.mint);case 3:if((o=e.sent).mintAuthority){e.next=6;break}throw new Error("Mint doesnt have authority");case 6:if(t.pubkeys.feeAccount){e.next=8;break}throw new Error("Invald fee account");case 8:return e.next=10,f.c.queryAccount(a,t.pubkeys.holdingAccounts[0]);case 10:return i=e.sent,e.next=13,f.c.queryAccount(a,t.pubkeys.holdingAccounts[1]);case 13:if(u=e.sent,(s=n).account){e.next=17;break}throw new Error("Missing account info.");case 17:return d=i.info.mint.toBase58()===s.mintAddress?i.info.amount.toNumber():u.info.amount.toNumber(),v=o.supply.toNumber(),g=o.mintAuthority,k=s.amount,k*(1-B)*v/d,w=0,E=[],O=[],j=[],e.next=28,a.getMinimumBalanceForRentExemption(p.a.span);case 28:return A=e.sent,x=R(E,O,s.account,r.publicKey,k+A,j),S=F(r.publicKey,r.publicKey,E,[],A,t.pubkeys.mint,j,new Set([t.pubkeys.feeAccount.toBase58()])),N=h(t.raw.account),T=_(E,O,x,r.publicKey,k,N?void 0:g),N&&j.push(T),E.push(Object(y.depositExactOneInstruction)(t.pubkeys.account,g,T.publicKey,x,t.pubkeys.holdingAccounts[0],t.pubkeys.holdingAccounts[1],t.pubkeys.mint,S,t.pubkeys.program,Object(b.e)().token,k,w,N)),e.next=37,Object(l.c)(a,r,E.concat(O),j);case 37:I=e.sent,Object(m.a)({message:"Pool Funded. Happy trading.",type:"success",description:"Transaction - ".concat(I)});case 39:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e,t,n,a,r,o,i,c){var u,s=o.toBase58(),l=Object(f.d)((function(e){return e.info.mint.toBase58()===s&&e.info.owner.toBase58()===t.toBase58()&&(void 0===c||!c.has(e.pubkey.toBase58()))})),d=s===b.d.toBase58();if(l&&!d)u=l.pubkey;else{var m=z(n,e,r,o,t,p.a.span);u=m.publicKey,i.push(m),d&&a.push(p.c.createCloseAccountInstruction(Object(b.e)().token,u,e,e,[]))}return u}function q(e,t,n){return t*n/(e+n)}function P(e,t,n){return n>=t?"Not possible":e*n/(t-n)}function W(e,t,n,a,r){return L.apply(this,arguments)}function L(){return(L=Object(u.a)(c.a.mark((function e(t,n,r,o,i){var u,s,l,d,p,m,b,y,v,g,h,k,w,E,O,j,A,x,S,N,B,T,I;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.c.queryMint(t,o.pubkeys.mint);case 2:return b=e.sent,e.next=5,f.c.queryAccount(t,o.pubkeys.holdingAccounts[0]);case 5:return y=e.sent,v=y.info.amount.toNumber(),e.next=9,f.c.queryAccount(t,o.pubkeys.holdingAccounts[1]);case 9:if(g=e.sent,h=g.info.amount.toNumber(),b.mintAuthority){e.next=13;break}throw new Error("Mint doesnt have authority");case 13:if(!b.supply.eqn(0)){e.next=15;break}return e.abrupt("return");case 15:return k=0,(w=null===(u=o.raw)||void 0===u||null===(s=u.data)||void 0===s||null===(l=s.curve)||void 0===l?void 0:l.offset)&&(k=w.token_b_offset,h+=k),e.next=20,f.c.queryMint(t,y.info.mint);case 20:return E=e.sent,e.next=23,f.c.queryMint(t,g.info.mint);case 23:if(O=e.sent,E&&O){e.next=26;break}return e.abrupt("return");case 26:if(j=y.info.mint.toBase58()===n,A=Math.pow(10,j?O.decimals:E.decimals),x=Math.pow(10,j?E.decimals:O.decimals),S=r*x,N=j?v:h,B=j?h:v,!(I=null===(d=o.raw)||void 0===d||null===(p=d.data)||void 0===p||null===(m=p.curve)||void 0===m?void 0:m.constantPrice)){e.next=38;break}T=r*A/I.token_b_price,e.next=47;break;case 38:e.t0=+i,e.next=e.t0===a.Add?41:e.t0===a.SwapGivenProceeds?43:e.t0===a.SwapGivenInput?45:47;break;case 41:return T=B/N*S,e.abrupt("break",47);case 43:return T=P(B,N,S),e.abrupt("break",47);case 45:return T=q(N,B,S),e.abrupt("break",47);case 47:if("string"!==typeof T){e.next=49;break}return e.abrupt("return",T);case 49:if(void 0!==T){e.next=51;break}return e.abrupt("return",void 0);case 51:return e.abrupt("return",T/A);case 52:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(e,t,n,a){return D.apply(this,arguments)}function D(){return(D=Object(u.a)(c.a.mark((function e(t,n,a,i){var u,d,f,v,g,h,k,w,E,O,j,A,x,S;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(m.a)({message:"Creating new pool...",description:"Please review transactions to approve.",type:"warn"}),!a.some((function(e){return!e.account}))){e.next=4;break}return Object(m.a)({message:"You need to have balance for all legs in the basket...",description:"Please review inputs.",type:"error"}),e.abrupt("return");case 4:return u=[],d=[],f=new s.a,e.t0=u,e.t1=s.e,e.t2=t.publicKey,e.t3=f.publicKey,e.next=13,n.getMinimumBalanceForRentExemption(p.b.span);case 13:return e.t4=e.sent,e.t5=p.b.span,e.t6=Object(b.e)().token,e.t7={fromPubkey:e.t2,newAccountPubkey:e.t3,lamports:e.t4,space:e.t5,programId:e.t6},e.t8=e.t1.createAccount.call(e.t1,e.t7),e.t0.push.call(e.t0,e.t8),v=new s.a,e.next=22,s.d.findProgramAddress([v.publicKey.toBuffer()],Object(b.e)().swap);case 22:return g=e.sent,h=Object(o.a)(g,2),k=h[0],w=h[1],u.push(p.c.createInitMintInstruction(Object(b.e)().token,f.publicKey,8,k,null)),e.next=29,n.getMinimumBalanceForRentExemption(p.a.span);case 29:return E=e.sent,O=[],j=[],a.forEach((function(e){if(e.account){var n=e.account.info.mint;O.push(z(u,t.publicKey,E,n,k,p.a.span))}})),A=z(u,t.publicKey,E,f.publicKey,t.publicKey,p.a.span),x=z(u,t.publicKey,E,f.publicKey,b.c||t.publicKey,p.a.span),e.next=37,Object(l.c)(n,t,u,[f,A,x].concat(O,Object(r.a)(j)));case 37:return S=e.sent,Object(m.a)({message:"Accounts created",description:"Transaction ".concat(S),type:"success"}),Object(m.a)({message:"Adding Liquidity...",description:"Please review transactions to approve.",type:"warn"}),j=[],u=[],d=[],e.t9=u,e.t10=s.e,e.t11=t.publicKey,e.t12=v.publicKey,e.next=49,n.getMinimumBalanceForRentExemption(Object(b.e)().swapLayout.span);case 49:return e.t13=e.sent,e.t14=Object(b.e)().swapLayout.span,e.t15=Object(b.e)().swap,e.t16={fromPubkey:e.t11,newAccountPubkey:e.t12,lamports:e.t13,space:e.t14,programId:e.t15},e.t17=e.t10.createAccount.call(e.t10,e.t16),e.t9.push.call(e.t9,e.t17),a.forEach((function(e,n){if(e.account){var a=R(u,d,e.account,t.publicKey,e.amount+E,j);u.push(p.c.createTransferInstruction(Object(b.e)().token,a,O[n].publicKey,t.publicKey,[],e.amount))}})),u.push(Object(y.createInitSwapInstruction)(v,k,O[0].publicKey,O[1].publicKey,f.publicKey,x.publicKey,A.publicKey,Object(b.e)().token,Object(b.e)().swap,w,i,Object(b.e)().swapLayout===y.TokenSwapLayout)),e.next=59,Object(l.c)(n,t,u.concat(d),[v].concat(Object(r.a)(j)));case 59:S=e.sent,Object(m.a)({message:"Pool Funded. Happy trading.",type:"success",description:"Transaction - ".concat(S)});case 61:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e,t,n,a,r,o){var i=Object(b.e)().token,c=new s.a;return e.push(p.c.createApproveInstruction(i,n,null!==o&&void 0!==o?o:c.publicKey,a,[],r)),t.push(p.c.createRevokeInstruction(i,n,a,[])),c}function R(e,t,n,a,r,o){if(!n.info.isNative)return n.pubkey;var i=new s.a;return e.push(s.e.createAccount({fromPubkey:a,newAccountPubkey:i.publicKey,lamports:r,space:p.a.span,programId:Object(b.e)().token})),e.push(p.c.createInitAccountInstruction(Object(b.e)().token,b.d,i.publicKey,a)),t.push(p.c.createCloseAccountInstruction(Object(b.e)().token,i.publicKey,a,a,[])),o.push(i),i.publicKey}function z(e,t,n,a,r,o){var i=new s.a;return e.push(s.e.createAccount({fromPubkey:t,newAccountPubkey:i.publicKey,lamports:n,space:o,programId:Object(b.e)().token})),e.push(p.c.createInitAccountInstruction(Object(b.e)().token,a,i.publicKey,r)),i}!function(e){e[e.Add=0]="Add",e[e.SwapGivenInput=1]="SwapGivenInput",e[e.SwapGivenProceeds=2]="SwapGivenProceeds"}(a||(a={}))},415:function(e,t){},416:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return m})),n.d(t,"a",(function(){return b})),n.d(t,"d",(function(){return y})),n.d(t,"f",(function(){return v})),n.d(t,"e",(function(){return g})),n.d(t,"i",(function(){return h})),n.d(t,"h",(function(){return k})),n.d(t,"g",(function(){return w}));var a=n(30),r=n(312),o=n(94),i=n(21),c=n(1),u=n(241),s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"publicKey";return c.blob(32,e)},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"uint64";return c.blob(8,e)},d=c.struct([c.nu64("tradeFeeNumerator"),c.nu64("tradeFeeDenominator"),c.nu64("ownerTradeFeeNumerator"),c.nu64("ownerTradeFeeDenominator"),c.nu64("ownerWithdrawFeeNumerator"),c.nu64("ownerWithdrawFeeDenominator"),c.nu64("hostFeeNumerator"),c.nu64("hostFeeDenominator")],"fees"),p=c.struct([c.u8("isInitialized"),c.u8("nonce"),s("tokenAccountA"),s("tokenAccountB"),s("tokenPool"),l("feesNumerator"),l("feesDenominator")]),m=c.struct([c.u8("isInitialized"),c.u8("nonce"),s("tokenProgramId"),s("tokenAccountA"),s("tokenAccountB"),s("tokenPool"),s("mintA"),s("mintB"),s("feeAccount"),c.u8("curveType"),l("tradeFeeNumerator"),l("tradeFeeDenominator"),l("ownerTradeFeeNumerator"),l("ownerTradeFeeDenominator"),l("ownerWithdrawFeeNumerator"),l("ownerWithdrawFeeDenominator"),c.blob(16,"padding")]),f=c.union(c.u8(),c.blob(32),"curve");f.addVariant(0,c.struct([]),"constantProduct"),f.addVariant(1,c.struct([c.nu64("token_b_price")]),"constantPrice"),f.addVariant(2,c.struct([]),"stable"),f.addVariant(3,c.struct([c.nu64("token_b_offset")]),"offset");var b=c.struct([c.u8("version"),c.u8("isInitialized"),c.u8("nonce"),s("tokenProgramId"),s("tokenAccountA"),s("tokenAccountB"),s("tokenPool"),s("mintA"),s("mintB"),s("feeAccount"),d,f]),y=function(t,n,o,s,l,d,p,m,f,b,y,v){var g=[{pubkey:t.publicKey,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:o,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!1,isWritable:!1},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!1},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!1}],h=e.alloc(1024);if(v){var k=[c.u8("instruction"),c.u8("nonce"),c.nu64("tradeFeeNumerator"),c.nu64("tradeFeeDenominator"),c.nu64("ownerTradeFeeNumerator"),c.nu64("ownerTradeFeeDenominator"),c.nu64("ownerWithdrawFeeNumerator"),c.nu64("ownerWithdrawFeeDenominator"),c.nu64("hostFeeNumerator"),c.nu64("hostFeeDenominator"),c.u8("curveType")];y.curveType===u.a.ConstantProductWithOffset?(k.push(c.nu64("token_b_offset")),k.push(c.blob(24,"padding"))):y.curveType===u.a.ConstantPrice?(k.push(c.nu64("token_b_price")),k.push(c.blob(24,"padding"))):k.push(c.blob(32,"padding"));var w=c.struct(k),E=y.fees,O=Object(r.a)(y,["fees"]),j=w.encode(Object(a.a)(Object(a.a)({instruction:0,nonce:b},E),O),h);h=h.slice(0,j)}else{var A=c.struct([c.u8("instruction"),c.u8("nonce"),c.u8("curveType"),c.nu64("tradeFeeNumerator"),c.nu64("tradeFeeDenominator"),c.nu64("ownerTradeFeeNumerator"),c.nu64("ownerTradeFeeDenominator"),c.nu64("ownerWithdrawFeeNumerator"),c.nu64("ownerWithdrawFeeDenominator"),c.blob(16,"padding")]).encode({instruction:0,nonce:b,curveType:y.curveType,tradeFeeNumerator:y.fees.tradeFeeNumerator,tradeFeeDenominator:y.fees.tradeFeeDenominator,ownerTradeFeeNumerator:y.fees.ownerTradeFeeNumerator,ownerTradeFeeDenominator:y.fees.ownerTradeFeeDenominator,ownerWithdrawFeeNumerator:y.fees.ownerWithdrawFeeNumerator,ownerWithdrawFeeDenominator:y.fees.ownerWithdrawFeeDenominator},h);h=h.slice(0,A)}return new i.g({keys:g,programId:f,data:h})},v=function(t,n,a,r,u,s,d,p,m,f,b,y,v,g,h){var k=c.struct([c.u8("instruction"),l("poolTokenAmount"),l("maximumTokenA"),l("maximumTokenB")]),w=e.alloc(k.span);k.encode({instruction:2,poolTokenAmount:new o.a(y).toBuffer(),maximumTokenA:new o.a(v).toBuffer(),maximumTokenB:new o.a(g).toBuffer()},w);var E=h?[{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:a,isSigner:!0,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:b,isSigner:!1,isWritable:!1}]:[{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:b,isSigner:!1,isWritable:!1}];return new i.g({keys:E,programId:f,data:w})},g=function(t,n,a,r,u,s,d,p,m,f,b,y,v){var g=c.struct([c.u8("instruction"),l("sourceTokenAmount"),l("minimumPoolTokenAmount")]),h=e.alloc(g.span);g.encode({instruction:4,sourceTokenAmount:new o.a(b).toBuffer(),minimumPoolTokenAmount:new o.a(y).toBuffer()},h);var k=v?[{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:a,isSigner:!0,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!1}]:[{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!1}];return new i.g({keys:k,programId:m,data:h})},h=function(t,n,a,r,u,s,d,p,m,f,b,y,v,g,h,k){var w=c.struct([c.u8("instruction"),l("poolTokenAmount"),l("minimumTokenA"),l("minimumTokenB")]),E=e.alloc(w.span);w.encode({instruction:3,poolTokenAmount:new o.a(v).toBuffer(),minimumTokenA:new o.a(g).toBuffer(),minimumTokenB:new o.a(h).toBuffer()},E);var O=k?[{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:a,isSigner:!0,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!0}]:[{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!0}];return u&&O.push({pubkey:u,isSigner:!1,isWritable:!0}),O.push({pubkey:y,isSigner:!1,isWritable:!1}),new i.g({keys:O,programId:b,data:E})},k=function(t,n,a,r,u,s,d,p,m,f,b,y,v,g){var h=c.struct([c.u8("instruction"),l("sourceTokenAmount"),l("maximumTokenAmount")]),k=e.alloc(h.span);h.encode({instruction:5,sourceTokenAmount:new o.a(y).toBuffer(),maximumTokenAmount:new o.a(v).toBuffer()},k);var w=g?[{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:a,isSigner:!0,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0}]:[{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0}];return m&&w.push({pubkey:m,isSigner:!1,isWritable:!0}),w.push({pubkey:b,isSigner:!1,isWritable:!1}),new i.g({keys:w,programId:f,data:k})},w=function(t,n,a,r,u,s,d,p,m,f,b,y,v,g,h){var k=c.struct([c.u8("instruction"),l("amountIn"),l("minimumAmountOut")]),w=h?[{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:a,isSigner:!0,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:b,isSigner:!1,isWritable:!1}]:[{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:b,isSigner:!1,isWritable:!1}];g&&w.push({pubkey:g,isSigner:!1,isWritable:!0});var E=e.alloc(k.span);return k.encode({instruction:1,amountIn:new o.a(y).toBuffer(),minimumAmountOut:new o.a(v).toBuffer()},E),new i.g({keys:w,programId:f,data:E})}}).call(this,n(61).Buffer)},418:function(e,t,n){},42:function(e,t,n){"use strict";var a=n(241);n.d(t,"CurveType",(function(){return a.a})),n.d(t,"DEFAULT_DENOMINATOR",(function(){return a.b}));var r=n(415);n.o(r,"TokenSwapLayout")&&n.d(t,"TokenSwapLayout",(function(){return r.TokenSwapLayout})),n.o(r,"TokenSwapLayoutLegacyV0")&&n.d(t,"TokenSwapLayoutLegacyV0",(function(){return r.TokenSwapLayoutLegacyV0})),n.o(r,"TokenSwapLayoutV1")&&n.d(t,"TokenSwapLayoutV1",(function(){return r.TokenSwapLayoutV1})),n.o(r,"createInitSwapInstruction")&&n.d(t,"createInitSwapInstruction",(function(){return r.createInitSwapInstruction})),n.o(r,"depositExactOneInstruction")&&n.d(t,"depositExactOneInstruction",(function(){return r.depositExactOneInstruction})),n.o(r,"depositInstruction")&&n.d(t,"depositInstruction",(function(){return r.depositInstruction})),n.o(r,"swapInstruction")&&n.d(t,"swapInstruction",(function(){return r.swapInstruction})),n.o(r,"withdrawExactOneInstruction")&&n.d(t,"withdrawExactOneInstruction",(function(){return r.withdrawExactOneInstruction})),n.o(r,"withdrawInstruction")&&n.d(t,"withdrawInstruction",(function(){return r.withdrawInstruction}));var o=n(416);n.d(t,"TokenSwapLayout",(function(){return o.a})),n.d(t,"TokenSwapLayoutLegacyV0",(function(){return o.b})),n.d(t,"TokenSwapLayoutV1",(function(){return o.c})),n.d(t,"createInitSwapInstruction",(function(){return o.d})),n.d(t,"depositExactOneInstruction",(function(){return o.e})),n.d(t,"depositInstruction",(function(){return o.f})),n.d(t,"swapInstruction",(function(){return o.g})),n.d(t,"withdrawExactOneInstruction",(function(){return o.h})),n.d(t,"withdrawInstruction",(function(){return o.i}))},48:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(0),r=n.n(a),o=n(384);function i(e){var t=e.message,n=void 0===t?"":t,a=e.description,i=void 0===a?void 0:a,c=e.txid,u=void 0===c?"":c,s=e.type,l=void 0===s?"info":s,d=e.placement,p=void 0===d?"bottomLeft":d;u&&(i=r.a.createElement(r.a.Fragment,null)),o.a[l]({message:r.a.createElement("span",{style:{color:"black"}},n),description:r.a.createElement("span",{style:{color:"black",opacity:.5}},i),placement:p,style:{backgroundColor:"white"}})}},507:function(e,t,n){},509:function(e,t,n){},555:function(e,t,n){e.exports=n(1119)},560:function(e,t,n){},561:function(e,t,n){},565:function(e,t){},566:function(e,t){},592:function(e,t){},594:function(e,t){},606:function(e,t){},607:function(e,t){},714:function(e,t,n){},77:function(e,t,n){"use strict";n.d(t,"a",(function(){return M})),n.d(t,"b",(function(){return C}));var a=n(22),r=n(0),o=n.n(r),i=n(518),c=n(1124),u=n(97),s=n(11),l=n.n(s),d=n(15),p=n(55),m=n(66),f=n(87),b=n(86),y=n(111),v=n.n(y),g=n(519),h=n(48),k=n(379),w=n(21),E=new w.d("11111111111111111111111111111111"),O=function(e){Object(f.a)(n,e);var t=Object(b.a)(n);function n(){var e;return Object(p.a)(this,n),(e=t.call(this))._connecting=void 0,e._publicKey=void 0,e._transport=void 0,e._connecting=!1,e._publicKey=null,e._transport=null,e}return Object(m.a)(n,[{key:"signAllTransactions",value:function(){var e=Object(d.a)(l.a.mark((function e(t){var n,a,r,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],a=0;case 2:if(!(a<t.length)){e.next=11;break}return r=t[a],e.next=6,this.signTransaction(r);case 6:o=e.sent,n.push(o);case 8:a++,e.next=2;break;case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signTransaction",value:function(){var e=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._transport&&this._publicKey){e.next=2;break}throw new Error("Not connected to Ledger");case 2:return e.next=4,Object(k.b)(this._transport,t);case 4:return n=e.sent,t.addSignature(this._publicKey,n),e.abrupt("return",t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"connect",value:function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._connecting){e.next=2;break}return e.abrupt("return");case 2:return this._connecting=!0,e.prev=3,e.next=6,g.a.create();case 6:return this._transport=e.sent,e.next=9,Object(k.a)(this._transport);case 9:this._publicKey=e.sent,this.emit("connect",this._publicKey),e.next=18;break;case 13:return e.prev=13,e.t0=e.catch(3),Object(h.a)({message:"Ledger Error",description:e.t0.message}),e.next=18,this.disconnect();case 18:return e.prev=18,this._connecting=!1,e.finish(18);case 21:case"end":return e.stop()}}),e,this,[[3,13,18,21]])})));return function(){return e.apply(this,arguments)}}()},{key:"disconnect",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!1,!this._transport){e.next=6;break}return e.next=4,this._transport.close();case 4:this._transport=null,t=!0;case 6:this._connecting=!1,this._publicKey=null,t&&this.emit("disconnect");case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"publicKey",get:function(){return this._publicKey||E}},{key:"connected",get:function(){return null!==this._publicKey}},{key:"autoApprove",get:function(){return!1}}]),n}(v.a),j=n(131),A=function(e){Object(f.a)(n,e);var t=Object(b.a)(n);function n(){var e;return Object(p.a)(this,n),(e=t.call(this))._publicKey=void 0,e._onProcess=void 0,e._connected=void 0,e._onProcess=!1,e._connected=!1,e.connect=e.connect.bind(Object(j.a)(e)),e}return Object(m.a)(n,[{key:"signAllTransactions",value:function(){var e=Object(d.a)(l.a.mark((function e(t){var n,a,r,o,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=window.solong).signAllTransactions){e.next=5;break}return e.abrupt("return",n.signAllTransactions(t));case 5:a=[],r=0;case 7:if(!(r<t.length)){e.next=16;break}return o=t[r],e.next=11,n.signTransaction(o);case 11:i=e.sent,a.push(i);case 13:r++,e.next=7;break;case 16:return e.abrupt("return",a);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"signTransaction",value:function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.solong.signTransaction(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"connect",value:function(){var e=this;this._onProcess||(void 0!==window.solong?(this._onProcess=!0,window.solong.selectAccount().then((function(t){e._publicKey=new w.d(t),e._connected=!0,e.emit("connect",e._publicKey)})).catch((function(){e.disconnect()})).finally((function(){e._onProcess=!1}))):Object(h.a)({message:"Solong Error",description:"Please install solong wallet from Chrome "}))}},{key:"disconnect",value:function(){this._publicKey&&(this._publicKey=void 0,this._connected=!1,this.emit("disconnect"))}},{key:"connected",get:function(){return this._connected}},{key:"autoApprove",get:function(){return!1}},{key:"publicKey",get:function(){return this._publicKey||E}}]),n}(v.a),x=function(e){Object(f.a)(n,e);var t=Object(b.a)(n);function n(){var e;return Object(p.a)(this,n),(e=t.call(this))._provider=void 0,e.connect=e.connect.bind(Object(j.a)(e)),e}return Object(m.a)(n,[{key:"signAllTransactions",value:function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._provider){e.next=2;break}return e.abrupt("return",t);case 2:return e.abrupt("return",this._provider.signAllTransactions(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signTransaction",value:function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._provider){e.next=2;break}return e.abrupt("return",t);case 2:return e.abrupt("return",this._provider.signTransaction(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"connect",value:function(){var e,t,n,a=this;if(!this._provider)return(null===(e=window)||void 0===e||null===(t=e.solana)||void 0===t?void 0:t.isPhantom)?(this._provider=window.solana,null===(n=this._provider)||void 0===n?void 0:n.connect().then((function(){return a.emit("connect")}))):(window.open("https://phantom.app/","_blank"),void Object(h.a)({message:"Phantom Error",description:"Please install Phantom wallet from Chrome "}))}},{key:"disconnect",value:function(){this._provider&&(this._provider.disconnect(),this._provider=void 0,this.emit("disconnect"))}},{key:"connected",get:function(){var e;return(null===(e=this._provider)||void 0===e?void 0:e.isConnected)||!1}},{key:"autoApprove",get:function(){var e;return(null===(e=this._provider)||void 0===e?void 0:e.autoApprove)||!1}},{key:"publicKey",get:function(){var e;return(null===(e=this._provider)||void 0===e?void 0:e.publicKey)||E}}]),n}(v.a),S=n(32),N=n(16),B="https://cdn.jsdelivr.net/gh/solana-labs/oyster@main/assets/wallets",T=[{name:"sollet.io",url:"https://www.sollet.io",icon:"".concat(B,"/sollet.svg")},{name:"Solflare",url:"https://solflare.com/access-wallet",icon:"".concat(B,"/solflare.svg")},{name:"Ledger",url:"https://www.ledger.com",icon:"".concat(B,"/ledger.svg"),adapter:O},{name:"Solong",url:"https://www.solong.com",icon:"".concat(B,"/solong.png"),adapter:A},{name:"mathwallet.org",url:"https://www.mathwallet.org",icon:"".concat(B,"/mathwallet.svg")},{name:"Phantom",url:"https://www.phantom.app",icon:"https://www.phantom.app/img/logo.png",adapter:x}],I=o.a.createContext(null);function M(e){var t,n,s=e.children,l=void 0===s?null:s,d=Object(S.e)().endpoint,p=Object(r.useState)(!1),m=Object(a.a)(p,2),f=m[0],b=m[1],y=Object(N.o)("walletProvider"),v=Object(a.a)(y,2),g=v[0],k=v[1],w=Object(r.useMemo)((function(){return T.find((function(e){return e.url===g}))}),[g]),E=Object(r.useMemo)((function(){if(w)return new(w.adapter||i.a)(g,d)}),[w,g,d]),O=Object(r.useState)(!1),j=Object(a.a)(O,2),A=j[0],x=j[1];Object(r.useEffect)((function(){return E&&(E.on("connect",(function(){if(E.publicKey){console.log("connected"),localStorage.removeItem("feeDiscountKey"),x(!0);var e=E.publicKey.toBase58(),t=e.length>20?"".concat(e.substring(0,7),".....").concat(e.substring(e.length-7,e.length)):e;Object(h.a)({message:"Wallet update",description:"Connected to wallet "+t})}})),E.on("disconnect",(function(){x(!1),Object(h.a)({message:"Wallet update",description:"Disconnected from wallet"}),localStorage.removeItem("feeDiscountKey")}))),function(){x(!1),E&&(E.disconnect(),x(!1))}}),[E]),Object(r.useEffect)((function(){return E&&f&&(E.connect(),b(!1)),function(){}}),[E,f]);var B=Object(r.useState)(!1),M=Object(a.a)(B,2),C=M[0],F=M[1],q=Object(r.useCallback)((function(){return F(!0)}),[]),P=Object(r.useCallback)((function(){return F(!1)}),[]);return o.a.createElement(I.Provider,{value:{wallet:E,connected:A,select:q,providerUrl:g,setProviderUrl:k,providerName:null!==(t=null===(n=T.find((function(e){return e.url===g})))||void 0===n?void 0:n.name)&&void 0!==t?t:g}},l,o.a.createElement(c.a,{title:"Select Wallet",okText:"Connect",visible:C,okButtonProps:{style:{display:"none"}},onCancel:P,width:400},T.map((function(e){return o.a.createElement(u.a,{size:"large",type:g===e.url?"primary":"ghost",onClick:function(){k(e.url),b(!0),P()},icon:o.a.createElement("img",{alt:"".concat(e.name),width:20,height:20,src:e.icon,style:{marginRight:8}}),style:{display:"block",width:"100%",textAlign:"left",marginBottom:8}},e.name)}))))}function C(){var e=Object(r.useContext)(I);if(!e)throw new Error("Missing wallet context");var t=e.wallet;return{connected:e.connected,wallet:t,providerUrl:e.providerUrl,setProvider:e.setProviderUrl,providerName:e.providerName,select:e.select,connect:function(){t?t.connect():e.select()},disconnect:function(){null===t||void 0===t||t.disconnect()}}}}},[[555,1,2]]]);
//# sourceMappingURL=main.37b87a0d.chunk.js.map